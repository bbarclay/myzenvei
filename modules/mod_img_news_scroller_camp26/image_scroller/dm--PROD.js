
var G_IMG_SRV="http://f.dailymail.co.uk";var AND=function(){if(typeof ANDDebugOn=='undefined'){ANDDebugOn=true;}
if(ANDDebugOn){if(typeof console=='undefined'){console=function(){return{log:function(msg){alert(msg);},dir:function(msg){alert(msg);},trace:function(msg){alert(msg);}};}();}}else{if(typeof console=='undefined'){console={};}
console.log=function(){};console.dir=function(){};console.trace=function(){};};var JSONscriptRequestManager=function(){var head=document.getElementsByTagName("head").item(0),scriptTag=null,cache={},queue=[],processing=false;var request=function(){this.scope=this;}
request.prototype={scriptUrl:"",callback:null,useCache:true,id:null,params:null}
var processQueue=function(){if(queue.length>0){processing=true;var strCallback="jsonCallback"+(new Date()).getTime();window[strCallback]=callback;strCallback="callback="+strCallback;if(queue[0].scriptUrl.indexOf("?")==-1){strCallback="?"+strCallback;}else if(queue[0].scriptUrl[queue[0].scriptUrl.length-1]!="?"){strCallback="&"+strCallback;}
scriptTag=document.createElement("script");scriptTag.setAttribute("type","text/javascript");scriptTag.setAttribute("src",queue[0].scriptUrl+strCallback);head.appendChild(scriptTag);}}
var callback=function(data){if(data){if(queue[0].useCache)cache[queue[0].id]=data;queue[0].callback.call(queue[0].scope,data,queue[0].params);}else{queue[0].callback.call(queue[0].scope,cache[queue[0].id],queue[0].params);}
queue[0]=null;queue.shift();head.removeChild(scriptTag);processing=false;processQueue();}
return{getScript:function(config){if(!config.scriptUrl&&typeof config.scriptUrl!="string"&&!config.callback&&typeof config.callback!="object")return false;var req=AND.extendObject(new request(),config);req.id=req.scriptUrl.replace(/[^a-z]/gi,"");if(req.useCache&&cache[req.id]){callback(null);}else{queue.push(req);if(!processing)processQueue();}}}}();return{isIE6:function(){return(typeof DM.IE6!="undefined");},extendObject:function(destination,source){for(var property in source){destination[property]=source[property];};return destination;},mouseEnterOrLeave:function(event,target){var relatedTarget=Event.getRelatedTarget(event)?Event.getRelatedTarget(event):event.type==='mouseout'?event.toElement:event.fromElement;if(typeof relatedTarget==='undefined'){return false;};while(relatedTarget&&relatedTarget!=target){relatedTarget=relatedTarget.parentNode;};return(relatedTarget!=target);},forEach:function(array,fn){for(var n=0,len=array.length;n<len;n++){fn(array[n]);}},getPageSize:function(){var xScroll,yScroll;if(window.innerHeight&&window.scrollMaxY){xScroll=document.body.scrollWidth;yScroll=window.innerHeight+window.scrollMaxY;}else if(document.body.scrollHeight>document.body.offsetHeight){xScroll=document.body.scrollWidth;yScroll=document.body.scrollHeight;}else{xScroll=document.body.offsetWidth;yScroll=document.body.offsetHeight;}
var windowWidth,windowHeight;if(self.innerHeight){windowWidth=self.innerWidth;windowHeight=self.innerHeight;}else if(document.documentElement&&document.documentElement.clientHeight){windowWidth=document.documentElement.clientWidth;windowHeight=document.documentElement.clientHeight;}else if(document.body){windowWidth=document.body.clientWidth;windowHeight=document.body.clientHeight;}
var pageHeight,pageWidth;if(yScroll<windowHeight){pageHeight=windowHeight;}else{pageHeight=yScroll;}
if(xScroll<windowWidth){pageWidth=windowWidth;}else{pageWidth=xScroll;}
var arrayPageSize=new Array(pageWidth,pageHeight,windowWidth,windowHeight)
return arrayPageSize;},getPageScroll:function(){var yScroll;if(self.pageYOffset){yScroll=self.pageYOffset;}else if(document.documentElement&&document.documentElement.scrollTop){yScroll=document.documentElement.scrollTop;}else if(document.body){yScroll=document.body.scrollTop;}
var arrayPageScroll=new Array('',yScroll)
return arrayPageScroll;},trim:function(str){return str.replace(/^\s\s*/,'').replace(/\s\s*$/,'');},setCookie:function(szName,szValue,szExpires,szPath,szDomain,bSecure){var szCookieText=escape(szName)+'='+escape(szValue);szCookieText+=(szExpires?';expires='+szExpires.toGMTString():'');szCookieText+=(szPath?';path='+szPath:'');szCookieText+=(szDomain?';domain='+szDomain:'');szCookieText+=(bSecure?';secure':'');document.cookie=szCookieText;},getCookie:function(szName){var szValue=null;if(document.cookie)
{var arr=document.cookie.split((escape(szName)+'='));if(2<=arr.length)
{var szValue=unescape(arr[1].split(';')[0]);if(szValue.length>1&&szValue.charAt(0)=='"'&&szValue.charAt(szValue.length-1)=='"'){szValue=szValue.substring(1,szValue.length-1);}}}
return szValue;},deleteCookie:function(szName)
{var tmp=AND.getCookie(szName);if(tmp)AND.setCookie(szName,tmp,(new Date(1)));},competitions:{isDailyMailDomain:function(strDomain){if(new RegExp("\.mailonsunday\.co\.uk$","i").test(strDomain)){return false;}else{return true;}},getRegUrl:function(strDomain){if(AND.competitions.isDailyMailDomain(strDomain)){return"https://register.dailymail.co.uk";}else{return"https://register.mailonsunday.co.uk";}},dologon:function(doc,strDomain){doc.action=AND.competitions.getRegUrl(strDomain)+"/login";doc.redirectPath.value=document.URL;doc.submit();},doregister:function(doc,strDomain){doc.action=AND.competitions.getRegUrl(strDomain)+"/login";doc.redirectPath.value=document.URL;doc.submit();},dologout:function(in_redirect_url){AND.deleteCookie("userid","/",".dailymail.co.uk");AND.deleteCookie("authid","/",".dailymail.co.uk");AND.deleteCookie("subuserid","/",".dailymail.co.uk");AND.deleteCookie("email","/",".dailymail.co.uk");AND.deleteCookie("userid","/",".mailonsunday.co.uk");AND.deleteCookie("subuserid","/",".mailonsunday.co.uk");AND.deleteCookie("email","/",".mailonsunday.co.uk");AND.deleteCookie("userid","/",".anl.dmgt.net");AND.deleteCookie("authid","/",".anl.dmgt.net");window.location=in_redirect_url;},docomplogon:function(doc,comp_id,strDomain){doc.action=AND.competitions.getRegUrl(strDomain)+"/loginCompetition";doc.EntryPath.value="https://register.anm.co.uk/register/comp.htm";if(doc.CompId.value==''){doc.CompId.value=comp_id;}
doc.submit();},doedit:function(doc,strDomain){doc.action=AND.competitions.getRegUrl(strDomain)+"/login";doc.Email.value=AND.getCookie("email");doc.redirectPath.value=document.URL;doc.Update.value="Y";doc.submit();}},getUrlParameter:function(param){param=param.replace(/[\[]/,"\\\[").replace(/[\]]/,"\\\]");var regex=new RegExp("[\\?&]"+param+"=([^&#]*)");var results=regex.exec(window.location.href);return(results==null)?"":results[1];},JSONscriptRequestManager:JSONscriptRequestManager}}();AND.Template=function(html){this.html=html;this._compile();};AND.Template.prototype={regex:/\{([\w-]+)\}/g,apply:function(values){return this.compiled(values);},set:AND.Template,_compile:function(){function fn(m,name){name="values['"+name+"']";return"',("+name+" == undefined ? '' : "+name+"),'";}
eval("this.compiled = function(values){ return "+"['"+this.html.replace(/\\/g,'\\\\').replace(/(\r\n|\n)/g,'\\n').replace(/'/g,"\\'").replace(this.regex,fn)+"'].join('');};");return this;}};AND.Intellitracker=function(){return{log:function(config){var img=new Image();var randNum=Math.ceil(Math.random()*1000000000);img.src="http://anm.intelli-direct.com/e/t3.dll?"+config.memberId+"&"+randNum+"&%20&iAddPAR&iREGQry&iSale&0&0&0&0&0&0&%20&1500&"+escape(config.url)+"&2";}}}();var swfobject=function(){var D="undefined",r="object",S="Shockwave Flash",W="ShockwaveFlash.ShockwaveFlash",q="application/x-shockwave-flash",R="SWFObjectExprInst",x="onreadystatechange",O=window,j=document,t=navigator,T=false,U=[h],o=[],N=[],I=[],l,Q,E,B,J=false,a=false,n,G,m=true,M=function(){var aa=typeof j.getElementById!=D&&typeof j.getElementsByTagName!=D&&typeof j.createElement!=D,ah=t.userAgent.toLowerCase(),Y=t.platform.toLowerCase(),ae=Y?/win/.test(Y):/win/.test(ah),ac=Y?/mac/.test(Y):/mac/.test(ah),af=/webkit/.test(ah)?parseFloat(ah.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):false,X=!+"\v1",ag=[0,0,0],ab=null;if(typeof t.plugins!=D&&typeof t.plugins[S]==r){ab=t.plugins[S].description;if(ab&&!(typeof t.mimeTypes!=D&&t.mimeTypes[q]&&!t.mimeTypes[q].enabledPlugin)){T=true;X=false;ab=ab.replace(/^.*\s+(\S+\s+\S+$)/,"$1");ag[0]=parseInt(ab.replace(/^(.*)\..*$/,"$1"),10);ag[1]=parseInt(ab.replace(/^.*\.(.*)\s.*$/,"$1"),10);ag[2]=/[a-zA-Z]/.test(ab)?parseInt(ab.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0}}else{if(typeof O.ActiveXObject!=D){try{var ad=new ActiveXObject(W);if(ad){ab=ad.GetVariable("$version");if(ab){X=true;ab=ab.split(" ")[1].split(",");ag=[parseInt(ab[0],10),parseInt(ab[1],10),parseInt(ab[2],10)]}}}catch(Z){}}}return{w3:aa,pv:ag,wk:af,ie:X,win:ae,mac:ac}}(),k=function(){if(!M.w3){return}if((typeof j.readyState!=D&&j.readyState=="complete")||(typeof j.readyState==D&&(j.getElementsByTagName("body")[0]||j.body))){f()}if(!J){if(typeof j.addEventListener!=D){j.addEventListener("DOMContentLoaded",f,false)}if(M.ie&&M.win){j.attachEvent(x,function(){if(j.readyState=="complete"){j.detachEvent(x,arguments.callee);f()}});if(O==top){(function(){if(J){return}try{j.documentElement.doScroll("left")}catch(X){setTimeout(arguments.callee,0);return}f()})()}}if(M.wk){(function(){if(J){return}if(!/loaded|complete/.test(j.readyState)){setTimeout(arguments.callee,0);return}f()})()}s(f)}}();function f(){if(J){return}try{var Z=j.getElementsByTagName("body")[0].appendChild(C("span"));Z.parentNode.removeChild(Z)}catch(aa){return}J=true;var X=U.length;for(var Y=0;Y<X;Y++){U[Y]()}}function K(X){if(J){X()}else{U[U.length]=X}}function s(Y){if(typeof O.addEventListener!=D){O.addEventListener("load",Y,false)}else{if(typeof j.addEventListener!=D){j.addEventListener("load",Y,false)}else{if(typeof O.attachEvent!=D){i(O,"onload",Y)}else{if(typeof O.onload=="function"){var X=O.onload;O.onload=function(){X();Y()}}else{O.onload=Y}}}}}function h(){if(T){V()}else{H()}}function V(){var X=j.getElementsByTagName("body")[0];var aa=C(r);aa.setAttribute("type",q);var Z=X.appendChild(aa);if(Z){var Y=0;(function(){if(typeof Z.GetVariable!=D){var ab=Z.GetVariable("$version");if(ab){ab=ab.split(" ")[1].split(",");M.pv=[parseInt(ab[0],10),parseInt(ab[1],10),parseInt(ab[2],10)]}}else{if(Y<10){Y++;setTimeout(arguments.callee,10);return}}X.removeChild(aa);Z=null;H()})()}else{H()}}function H(){var ag=o.length;if(ag>0){for(var af=0;af<ag;af++){var Y=o[af].id;var ab=o[af].callbackFn;var aa={success:false,id:Y};if(M.pv[0]>0){var ae=c(Y);if(ae){if(F(o[af].swfVersion)&&!(M.wk&&M.wk<312)){w(Y,true);if(ab){aa.success=true;aa.ref=z(Y);ab(aa)}}else{if(o[af].expressInstall&&A()){var ai={};ai.data=o[af].expressInstall;ai.width=ae.getAttribute("width")||"0";ai.height=ae.getAttribute("height")||"0";if(ae.getAttribute("class")){ai.styleclass=ae.getAttribute("class")}if(ae.getAttribute("align")){ai.align=ae.getAttribute("align")}var ah={};var X=ae.getElementsByTagName("param");var ac=X.length;for(var ad=0;ad<ac;ad++){if(X[ad].getAttribute("name").toLowerCase()!="movie"){ah[X[ad].getAttribute("name")]=X[ad].getAttribute("value")}}P(ai,ah,Y,ab)}else{p(ae);if(ab){ab(aa)}}}}}else{w(Y,true);if(ab){var Z=z(Y);if(Z&&typeof Z.SetVariable!=D){aa.success=true;aa.ref=Z}ab(aa)}}}}}function z(aa){var X=null;var Y=c(aa);if(Y&&Y.nodeName=="OBJECT"){if(typeof Y.SetVariable!=D){X=Y}else{var Z=Y.getElementsByTagName(r)[0];if(Z){X=Z}}}return X}function A(){return!a&&F("6.0.65")&&(M.win||M.mac)&&!(M.wk&&M.wk<312)}function P(aa,ab,X,Z){a=true;E=Z||null;B={success:false,id:X};var ae=c(X);if(ae){if(ae.nodeName=="OBJECT"){l=g(ae);Q=null}else{l=ae;Q=X}aa.id=R;if(typeof aa.width==D||(!/%$/.test(aa.width)&&parseInt(aa.width,10)<310)){aa.width="310"}if(typeof aa.height==D||(!/%$/.test(aa.height)&&parseInt(aa.height,10)<137)){aa.height="137"}j.title=j.title.slice(0,47)+" - Flash Player Installation";var ad=M.ie&&M.win?"ActiveX":"PlugIn",ac="MMredirectURL="+O.location.toString().replace(/&/g,"%26")+"&MMplayerType="+ad+"&MMdoctitle="+j.title;if(typeof ab.flashvars!=D){ab.flashvars+="&"+ac}else{ab.flashvars=ac}if(M.ie&&M.win&&ae.readyState!=4){var Y=C("div");X+="SWFObjectNew";Y.setAttribute("id",X);ae.parentNode.insertBefore(Y,ae);ae.style.display="none";(function(){if(ae.readyState==4){ae.parentNode.removeChild(ae)}else{setTimeout(arguments.callee,10)}})()}u(aa,ab,X)}}function p(Y){if(M.ie&&M.win&&Y.readyState!=4){var X=C("div");Y.parentNode.insertBefore(X,Y);X.parentNode.replaceChild(g(Y),X);Y.style.display="none";(function(){if(Y.readyState==4){Y.parentNode.removeChild(Y)}else{setTimeout(arguments.callee,10)}})()}else{Y.parentNode.replaceChild(g(Y),Y)}}function g(ab){var aa=C("div");if(M.win&&M.ie){aa.innerHTML=ab.innerHTML}else{var Y=ab.getElementsByTagName(r)[0];if(Y){var ad=Y.childNodes;if(ad){var X=ad.length;for(var Z=0;Z<X;Z++){if(!(ad[Z].nodeType==1&&ad[Z].nodeName=="PARAM")&&!(ad[Z].nodeType==8)){aa.appendChild(ad[Z].cloneNode(true))}}}}}return aa}function u(ai,ag,Y){var X,aa=c(Y);if(M.wk&&M.wk<312){return X}if(aa){if(typeof ai.id==D){ai.id=Y}if(M.ie&&M.win){var ah="";for(var ae in ai){if(ai[ae]!=Object.prototype[ae]){if(ae.toLowerCase()=="data"){ag.movie=ai[ae]}else{if(ae.toLowerCase()=="styleclass"){ah+=' class="'+ai[ae]+'"'}else{if(ae.toLowerCase()!="classid"){ah+=" "+ae+'="'+ai[ae]+'"'}}}}}var af="";for(var ad in ag){if(ag[ad]!=Object.prototype[ad]){af+='<param name="'+ad+'" value="'+ag[ad]+'" />'}}aa.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+ah+">"+af+"</object>";N[N.length]=ai.id;X=c(ai.id)}else{var Z=C(r);Z.setAttribute("type",q);for(var ac in ai){if(ai[ac]!=Object.prototype[ac]){if(ac.toLowerCase()=="styleclass"){Z.setAttribute("class",ai[ac])}else{if(ac.toLowerCase()!="classid"){Z.setAttribute(ac,ai[ac])}}}}for(var ab in ag){if(ag[ab]!=Object.prototype[ab]&&ab.toLowerCase()!="movie"){e(Z,ab,ag[ab])}}aa.parentNode.replaceChild(Z,aa);X=Z}}return X}function e(Z,X,Y){var aa=C("param");aa.setAttribute("name",X);aa.setAttribute("value",Y);Z.appendChild(aa)}function y(Y){var X=c(Y);if(X&&X.nodeName=="OBJECT"){if(M.ie&&M.win){X.style.display="none";(function(){if(X.readyState==4){b(Y)}else{setTimeout(arguments.callee,10)}})()}else{X.parentNode.removeChild(X)}}}function b(Z){var Y=c(Z);if(Y){for(var X in Y){if(typeof Y[X]=="function"){Y[X]=null}}Y.parentNode.removeChild(Y)}}function c(Z){var X=null;try{X=j.getElementById(Z)}catch(Y){}return X}function C(X){return j.createElement(X)}function i(Z,X,Y){Z.attachEvent(X,Y);I[I.length]=[Z,X,Y]}function F(Z){var Y=M.pv,X=Z.split(".");X[0]=parseInt(X[0],10);X[1]=parseInt(X[1],10)||0;X[2]=parseInt(X[2],10)||0;return(Y[0]>X[0]||(Y[0]==X[0]&&Y[1]>X[1])||(Y[0]==X[0]&&Y[1]==X[1]&&Y[2]>=X[2]))?true:false}function v(ac,Y,ad,ab){if(M.ie&&M.mac){return}var aa=j.getElementsByTagName("head")[0];if(!aa){return}var X=(ad&&typeof ad=="string")?ad:"screen";if(ab){n=null;G=null}if(!n||G!=X){var Z=C("style");Z.setAttribute("type","text/css");Z.setAttribute("media",X);n=aa.appendChild(Z);if(M.ie&&M.win&&typeof j.styleSheets!=D&&j.styleSheets.length>0){n=j.styleSheets[j.styleSheets.length-1]}G=X}if(M.ie&&M.win){if(n&&typeof n.addRule==r){n.addRule(ac,Y)}}else{if(n&&typeof j.createTextNode!=D){n.appendChild(j.createTextNode(ac+" {"+Y+"}"))}}}function w(Z,X){if(!m){return}var Y=X?"visible":"hidden";if(J&&c(Z)){c(Z).style.visibility=Y}else{v("#"+Z,"visibility:"+Y)}}function L(Y){var Z=/[\\\"<>\.;]/;var X=Z.exec(Y)!=null;return X&&typeof encodeURIComponent!=D?encodeURIComponent(Y):Y}var d=function(){if(M.ie&&M.win){window.attachEvent("onunload",function(){var ac=I.length;for(var ab=0;ab<ac;ab++){I[ab][0].detachEvent(I[ab][1],I[ab][2])}var Z=N.length;for(var aa=0;aa<Z;aa++){y(N[aa])}for(var Y in M){M[Y]=null}M=null;for(var X in swfobject){swfobject[X]=null}swfobject=null})}}();return{registerObject:function(ab,X,aa,Z){if(M.w3&&ab&&X){var Y={};Y.id=ab;Y.swfVersion=X;Y.expressInstall=aa;Y.callbackFn=Z;o[o.length]=Y;w(ab,false)}else{if(Z){Z({success:false,id:ab})}}},getObjectById:function(X){if(M.w3){return z(X)}},embedSWF:function(ab,ah,ae,ag,Y,aa,Z,ad,af,ac){var X={success:false,id:ah};if(M.w3&&!(M.wk&&M.wk<312)&&ab&&ah&&ae&&ag&&Y){w(ah,false);K(function(){ae+="";ag+="";var aj={};if(af&&typeof af===r){for(var al in af){aj[al]=af[al]}}aj.data=ab;aj.width=ae;aj.height=ag;var am={};if(ad&&typeof ad===r){for(var ak in ad){am[ak]=ad[ak]}}if(Z&&typeof Z===r){for(var ai in Z){if(typeof am.flashvars!=D){am.flashvars+="&"+ai+"="+Z[ai]}else{am.flashvars=ai+"="+Z[ai]}}}if(F(Y)){var an=u(aj,am,ah);if(aj.id==ah){w(ah,true)}X.success=true;X.ref=an}else{if(aa&&A()){aj.data=aa;P(aj,am,ah,ac);return}else{w(ah,true)}}if(ac){ac(X)}})}else{if(ac){ac(X)}}},switchOffAutoHideShow:function(){m=false},ua:M,getFlashPlayerVersion:function(){return{major:M.pv[0],minor:M.pv[1],release:M.pv[2]}},hasFlashPlayerVersion:F,createSWF:function(Z,Y,X){if(M.w3){return u(Z,Y,X)}else{return undefined}},showExpressInstall:function(Z,aa,X,Y){if(M.w3&&A()){P(Z,aa,X,Y)}},removeSWF:function(X){if(M.w3){y(X)}},createCSS:function(aa,Z,Y,X){if(M.w3){v(aa,Z,Y,X)}},addDomLoadEvent:K,addLoadEvent:s,getQueryParamValue:function(aa){var Z=j.location.search||j.location.hash;if(Z){if(/\?/.test(Z)){Z=Z.split("?")[1]}if(aa==null){return L(Z)}var Y=Z.split("&");for(var X=0;X<Y.length;X++){if(Y[X].substring(0,Y[X].indexOf("="))==aa){return L(Y[X].substring((Y[X].indexOf("=")+1)))}}}return""},expressInstallCallback:function(){if(a){var X=c(R);if(X&&l){X.parentNode.replaceChild(l,X);if(Q){w(Q,true);if(M.ie&&M.win){l.style.display="block"}}if(E){E(B)}}a=false}}}}();var adverts=(function(){var tooSmall=false,ord=Math.random()*10000000000000000,tile=1,pushdown=false,ccSiteWidths={'UK':1252,'US':1332},adArr=[];var rsi_segs=[];var segs_beg=document.cookie.indexOf('rsi_segs=');if(segs_beg>=0){segs_beg=document.cookie.indexOf('=',segs_beg)+1;if(segs_beg>0){var segs_end=document.cookie.indexOf(';',segs_beg);if(segs_end==-1)segs_end=document.cookie.length;rsi_segs=document.cookie.substring(segs_beg,segs_end).split('|');}}
var segQS=rsi_segs.length>0?";rsi="+rsi_segs[0]+";":"";for(var i=1;i<rsi_segs.length&&i<20;i++){segQS+=("rsi"+"="+rsi_segs[i]+";");}
var runDart=function(ad){if(enableAds){var adZone="http://ad.uk.doubleclick.net/adj/"+dartSiteId+"/"+adAreaSiteId+"_"+adAreaSiteId+adAreaId+"_"+adSubareaId;if(adAreaId===adSubareaId){adZone+=adPageType;}
var op='';if(ad.type=="468x60,728x90"){op="dcopt=ist;";}
var scriptBlock=["<scr","ipt language=\"JavaScript\" src=\"",adZone,";area=",adAreaId,";subarea=",adSubareaId,";target=",ad.target,";page=",adPageType,";article=",adArticleId,";content=",adContent,";section=",adSection,";referrer=",adReferrer,";environment=",adEnvironment,";",segQS,op,"tile=",tile,";sz=",ad.type,";ord=",ord,"?\" type=\"text/javascript\"></script>"].join('');document.writeln(scriptBlock);tile++;}}
var testSize=function(cc){if(!tooSmall){var rightAdContainer=$("js-sky-right"),leftAdContainer=$("js-sky-left");if(rightAdContainer||leftAdContainer){if($D.getViewportWidth()<ccSiteWidths[cc]){tooSmall=true;}else{if(rightAdContainer)rightAdContainer.style.display='block';if(leftAdContainer)leftAdContainer.style.display='block';}}}}
return{addToArray:function(id,type,target,wide,cc){var ad={id:id,type:type,target:target||''}
if(wide){testSize(cc||'UK');if(!tooSmall){runDart(ad);}}else{runDart(ad);}},reg:function(id){adArr.push(id);},togglePushdown:function(expand){if($("pushdown")){if(arguments.length==0||expand!=pushdown){pushdown=(arguments.length==0)?!pushdown:expand;var animAttributes={height:{from:(pushdown)?40:250,to:(pushdown)?250:40}}
new $Y.Anim($("pushdown"),animAttributes,1,YAHOO.util.Easing.easeOut).animate();}}},init:function(){var xy,pxy=$D.getXY('content'),css='<style type="text/css">';for(var i=0,len=adArr.length;i<len;i++){xy=$D.getXY(adArr[i]);css+="#"+adArr[i]+"-ad {";css+="top: "+(xy[1]-pxy[1])+"px;"
css+="left: "+(xy[0]-pxy[0])+"px;"
css+="}"}
css+="</style>";document.writeln(css);}}})();var Y=YAHOO.util;var Dom=Y.Dom;var Event=Y.Event;var Anim=Y.Anim;var Element=Y.Element;var $M=YAHOO.util.Motion;var $Y=YAHOO.util;var $D=YAHOO.util.Dom;var $G=$D.get;var $=$G;var $$=$D.getElementsByClassName;var $E=YAHOO.util.Event;var $K=YAHOO.util.KeyListener;var $T=YAHOO.Tools;function $A(iterable){if(!iterable)return[];if(iterable.toArray)return iterable.toArray();var length=iterable.length,results=new Array(length);while(length--)results[length]=iterable[length];return results;}
if(YAHOO.env.ua.webkit>0){function $A(iterable){if(!iterable)return[];if(!(YAHOO.lang.isFunction(iterable)&&iterable=='[object NodeList]')&&iterable.toArray)return iterable.toArray();var length=iterable.length,results=new Array(length);while(length--)results[length]=iterable[length];return results;}}
function $bind(fn,scope){var args=$A(arguments),__method=args.shift(),object=args.shift();return function(){return __method.apply(object,args.concat($A(arguments)));};}
function $curry(fn){var args=$A(arguments),__method=args.shift();return function(){return __method.apply(null,args.concat($A(arguments)));};}
document.write('<style type="text/css">.js-hide{display:none;}</style>');var DM=function(){var modules={},initialised;function checkLogin(name){if($T.getCookie(name)!=null){$D.addClass(document.getElementsByTagName("body")[0],"logged-in");}}
function fixIFrame(){var fn=function(e){var target=$E.getTarget(e);var lnk=(target.tagName=='A')?target:$D.getAncestorByTagName(target,'a');if(lnk&&lnk.target==''){top.location.replace(lnk.href);}}
$E.addListener(document.getElementsByTagName('BODY')[0],'click',fn,this,true);var forms=document.getElementsByTagName("form");for(var i=0,len=forms.length;i<len;i++){forms[i].setAttribute("target","_top");}
setTimeout(function(){var params=window.location.search.substring(1).split("&");for(var i=0,len=params.length;i<len;i++){var param=params[i].split("=");if(param[0]=="dmproxy"){var iFrameId="";if(window.location.search.indexOf("betaonly")!=-1){iFrameId="dmbeta";}else if(window.location.search.indexOf("headeronly")!=-1){iFrameId="dmheader";}else if(window.location.search.indexOf("footeronly")!=-1){iFrameId="dmfooter";}
if(iFrameId!=""){var iFrame=document.createElement('iframe');iFrame.style.border='0px';iFrame.style.width='0px';iFrame.style.height='0px';var windowHeight=Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight);iFrame.src=param[1]+"?command=updateIFrame&id="+iFrameId+"&attribute=height&value="+windowHeight;document.body.appendChild(iFrame);}}}},1000);}
function exists(key){if(modules[key])return true;else return false;}
function has(key,o){if(o){if(!modules[key])modules[key]=[];if(o.constructor==Array){modules[key]=Array.concat(modules[key],o);}
else{modules[key].push(o);}}else{modules[key]=true;}}
return{init:function(){if(!initialised){if(self!=top){fixIFrame();}
var oMap={'article':{o:DM.Article},'azStarSearch':{o:DM.AzStarSearch},'bcVideo':{o:DM.BCVideoManager,ll:true},'carousel':{o:DM.Carousels.Manager},'cartoons':{o:DM.Cartoons},'coffeeBreak':{o:DM.CoffeeBreak},'debate':{o:DM.Debate,ll:true},'debateAvatar':{o:DM.DebateAvatar,ll:true},'diggWidget':{o:DM.Digg},'expansionArticlePage':{o:DM.ExpansionArticlePageManager,ll:true},'footballFeeds':{o:DM.FootballFeeds},'formValidator':{o:DM.FormValidator.Manager},'gMap':{o:DM.GMap},'health':{o:DM.HealthManager},'imageTagging':{o:DM.ImageTagging},'horoscopes':{o:DM.Horoscopes},'lightBox':{o:DM.LightboxManager},'mirrorMirror':{o:DM.MirrorMirrorManager},'pictureSwap':{o:DM.PictureSwap},'poll':{o:DM.PollManager},'readerComments':{o:DM.ReaderCommentsManager,ll:true},'rssMenu':{o:DM.RSS},'search':{o:DM.Search,ll:true},'showcase':{o:DM.ShowcaseManager},'styleStoreSearch':{o:DM.StyleStoreSearch,ll:true},'tabbedHeadline':{o:DM.HeadlineModule},'ticker':{o:DM.Tickers},'tools':{o:DM.Tools},'travelSearch':{o:DM.TravelSearch,ll:true},'twitter':{o:DM.Twitters}}
for(var key in modules){if(oMap[key]&&oMap[key].o){var fn=(oMap[key].ll)?oMap[key].o.getInstance().init:oMap[key].o.init;fn.call((oMap[key].scope||oMap[key].o),modules[key]);}}
initialised=true;}},popup:function(url,w,h){var _popupFeatures="menubar=false,location=false,statusbar=false,toolbar=false,resizable=false",_popupfpFeatures="resizable=1,scrollbars=1",nw=window.open(url,"_blank","width="+w+",height="+h+","+_popupFeatures+","+_popupfpFeatures);nw.focus();return nw;},checkLogin:checkLogin,exists:exists,has:has}}();DM.Tabs=function(config){var self=this;this.scope=this;this._callHandler=function(){self.handler.call(self.scope);}
this._init(config);}
DM.Tabs.prototype={tabs:[],tabPanes:null,initialTabIndex:0,tabIndex:0,previousTabIndex:0,activeClasses:"",inactiveClasses:"",borderCorners:false,handler:null,callbackOnLoad:false,getPreviousTab:function(){return this.tabs[this.previousTabIndex];},getPreviousTabPane:function(){return this.tabPanes[this.previousTabIndex];},getCurrentTab:function(){return this.tabs[this.tabIndex];},getCurrentTabPane:function(){return this.tabPanes[this.tabIndex];},_clickHandler:function(e){var target=$E.getTarget(e);while(!$D.hasClass(target,"dm-tab")){target=target.parentNode;if(target.tagName=="BODY")return;}
$E.stopEvent(e);if($D.hasClass(target,"dm-tab-off")){var match=new RegExp("js\-dm\-tab\-([0-9]+)","i").exec(target.className);var newTabIndex=parseInt(match[1]);this._setTabState(this.tabIndex,false);this._setTabState(newTabIndex,true);this.previousTabIndex=this.tabIndex;this.tabIndex=newTabIndex;if(this.handler)this.handler.call(this.scope);}},_setTabState:function(tabIndex,tabState){var tab=this.tabs[tabIndex];if(tabState){for(var i=0,len=this.inactiveClasses.length;i<len;i++){$D.removeClass(tab,this.inactiveClasses[i]);}
for(var i=0,len=this.activeClasses.length;i<len;i++){$D.addClass(tab,this.activeClasses[i]);}
if(this.tabPanes&&this.tabPanes.length==this.tabs.length){$D.removeClass(this.tabPanes[tabIndex],"dm-tab-pane-hidden");}}else{for(var i=0,len=this.activeClasses.length;i<len;i++){$D.removeClass(tab,this.activeClasses[i]);}
for(var i=0,len=this.inactiveClasses.length;i<len;i++){$D.addClass(tab,this.inactiveClasses[i]);}
if(this.tabPanes&&this.tabPanes.length==this.tabs.length){$D.addClass(this.tabPanes[tabIndex],"dm-tab-pane-hidden");}}},_init:function(config){if(!config.container)return false;AND.extendObject(this,config);this.container=((typeof this.container=="string")?$(this.container):this.container);this.activeClasses=(this.activeClasses=="")?["dm-tab-on"]:(this.activeClasses+" dm-tab-on").split(" ");this.inactiveClasses=(this.inactiveClasses=="")?["dm-tab-off"]:(this.inactiveClasses+" dm-tab-off").split(" ");this.tabIndex=this.initialTabIndex;this.previousTabIndex=this.initialTabIndex;for(var i=0,len=this.tabs.length;i<len;i++){$D.addClass(this.tabs[i],"dm-tab");$D.addClass(this.tabs[i],"js-dm-tab-"+i);this._setTabState(i,(this.tabIndex==i));}
$D.removeClass(this.tabPanes,'js-hide');$E.addListener(this.container,"click",this._clickHandler,this,true);if(this.callbackOnLoad&&this.handler)setTimeout(this._callHandler,0);}}
DM.HeadlineModule={init:function(objs){for(var i=0,len=objs.length;i<len;i++){el=$(objs[i].id);if(!el)break;container=el.getElementsByTagName('ul')[0];new DM.HeadlineModule.Tabs(AND.extendObject({container:container,tabs:container.getElementsByTagName('li'),tabPanes:$$('dm-tab-pane','div',el),activeClasses:'bdrcc link-wocc',inactiveClasses:'bdrcc ow-igr2-bx link-ccogr2'},objs[i]));}}}
DM.HeadlineModule.Tabs=function(config){DM.HeadlineModule.Tabs.superclass.constructor.call(this,config);};YAHOO.lang.extend(DM.HeadlineModule.Tabs,DM.Tabs);DM.HeadlineModule.Tabs.prototype._clickHandler=function(e){if(!this.resetHeight){this.tabPanes[0].parentNode.style.height=this.tabPanes[0].offsetHeight+'px';this.resetHeight=true;}
DM.HeadlineModule.Tabs.superclass._clickHandler.call(this,e);}
DM.ReaderCommentsManager=function(){var uniqueInstance;function constructor(){var MAX_COMMENTS=5,MAX_COOKIE_RATINGS=50;var defaultPaginationConfig,maxComments,totalComments=0,viewAll=false,rc,callbackVoteCountEl,tabs,tabCommands=["newest","oldest","bestRated","worstRated"],tabNames=["newest","oldest","best","worst"],buttonLabel,ratingsCookie,abuseCookie,articleId;var commentTemplate=new AND.Template('<div class="comment-post bogr1 bdrgr3 cleared">'+'<p class="comment-body">{body}</p>'+'<p class="user-info bold">{userInfo}</p>'+'<div class="rating {ratingClass}" rel="{commentId}">'+'<span class="gr5ox">Click to rate</span> '+'<a class="js-rate-up rate-up" href="#">&nbsp;</a> '+'<a class="js-rate-down rate-down" href="#">&nbsp;</a> '+'<span>Rating</span> '+'<span class="current-rating">&nbsp;</span> '+'<span class="js-vote-count vote-count">{voteCount}</span>'+'</div>'+'{abuseHTML}'+'</div>');var abuseTemplates={"link-gr5ox":new AND.Template('<p class="js-report-abuse report-abuse link-gr5ox"><a href="{abuseLink}">Report abuse</a></p>'),"gr3ox":new AND.Template('<p class="js-report-abuse report-abuse gr3ox">Report abuse</p>')}
var loadComments=function(config){setButtonLabel("Loading...");if(config.maxResults==maxComments){AjaxReaderComments.getSomeReaderComments(articleId,config.maxResults,tabCommands[tabs.tabIndex],loadComments_callback);}
else{AjaxReaderComments.paginateReaderComments(articleId,config.page,config.maxResults,tabCommands[tabs.tabIndex],loadComments_callback);}};var loadComments_callback=function(response){var comments=(response.readerComments)?response.readerComments:response,comment,dateStr,tmp="",vc,ratingClass,cd;for(var i=0,len=comments.length;i<len;i++){comment=comments[i];if(comment.voteCount==0){vc="("+comment.voteCount+")";ratingClass="";}
else{if(comment.voteCount>0){ratingClass="positive";}
else{ratingClass="negative";comment.voteCount*=-1;}
vc=comment.voteCount;}
cd=comment.creationDate;dateStr=""+cd.getDate();dateStr+="/"+(cd.getMonth()+1);dateStr+="/"+((cd.getYear()<1900)?cd.getYear()+1900:cd.getYear());dateStr+=" "+cd.getHours();dateStr+=":"+((cd.getMinutes()<10)?"0"+cd.getMinutes():cd.getMinutes());tmp+=commentTemplate.apply({commentId:comment.id,body:comment.yourComments,voteCount:vc,ratingClass:ratingClass+getRatingClass(comment.id),userInfo:"- "+comment.name+", "+comment.townAndCountry+", "+dateStr,abuseHTML:abuseTemplates[getAbuseClass(comment.id)].apply({abuseLink:"reportAbuseInComment.html?articleId="+articleId+"&commentId="+comment.id})});}
$("js-comments").innerHTML=tmp;if(viewAll){setButtonLabel("View "+tabNames[tabs.tabIndex]+" "+maxComments);DM.DWRPagination.getInstance().doPagination(response.paginationBean);}
else{setButtonLabel("View all");DM.DWRPagination.getInstance().hide();}
if(totalComments>maxComments){$D.removeClass($('js-view-all-link'),'hidden');}
if(comments.length>=0){$D.removeClass($$('rc-content',"div",rc),'hidden');}};var toggleViewAll=function(){viewAll=!viewAll;if(viewAll){loadComments(defaultPaginationConfig);}
else{loadComments({maxResults:maxComments,page:0});}};var readerCommentsHandler=function(e){var event=e||window.event;var elTarget=$E.getTarget(event);while(elTarget!=rc){if(elTarget.id=='js-view-all-link'){(viewAll)?intellitrackerLog("six"):intellitrackerLog("all");toggleViewAll();$E.stopEvent(event);}
else if($D.hasClass(elTarget,"js-rate-up")||$D.hasClass(elTarget,"js-rate-down")){if(!$D.hasClass(elTarget.parentNode,"rated")){var ratingEl=elTarget.parentNode;var voteCount=$$("js-vote-count","span",elTarget.parentNode)[0].innerHTML;if($D.hasClass(elTarget,"js-rate-up")){$D.addClass(elTarget.parentNode,"rated rated-up");updateRatingsCookie(ratingEl.getAttribute("rel"),"+");AjaxReaderComments.incrementReaderCommentVoteCount(ratingEl.getAttribute("rel"));if(voteCount.indexOf("(0)")!=-1)voteCount=1;else if($D.hasClass(ratingEl,"negative"))voteCount=parseInt(voteCount)-1;else voteCount=parseInt(voteCount)+1;}
else if($D.hasClass(elTarget,"js-rate-down")){$D.addClass(elTarget.parentNode,"rated rated-down");updateRatingsCookie(ratingEl.getAttribute("rel"),"-");AjaxReaderComments.decrementReaderCommentVoteCount(ratingEl.getAttribute("rel"));if(voteCount.indexOf("(0)")!=-1)voteCount=-1;else if($D.hasClass(ratingEl,"negative"))voteCount=(parseInt(voteCount)+1)*-1;else voteCount=parseInt(voteCount)-1;}
updateRatingCount(ratingEl,voteCount);}
$E.stopEvent(event);}
elTarget=elTarget.parentNode;}};var checkCookies=function(){if(ratingsCookie){var arrComments=$$("comment-post","div",rc);var currentComment;for(var i=0,len=arrComments.length;i<len;i++){currentComment=arrComments[i];currentComment.rating=currentComment.getElementsByTagName("div")[0];currentComment.id=currentComment.rating.getAttribute("rel");if(ratingsCookie.search(eval("/"+currentComment.id+"[\+\-]/"))!=-1){$D.addClass(currentComment.rating,getRatingClass(currentComment.id));}}}
if(abuseCookie){var arrComments=$$("comment-post","div",rc);var arrAbuseLink=$$("js-report-abuse","p",rc);var currentComment,currentAbuseLink;for(var i=0,len=arrComments.length;i<len;i++){currentComment=arrComments[i];currentAbuseLink=arrAbuseLink[i];currentComment.rating=currentComment.getElementsByTagName("div")[0];currentComment.id=currentComment.rating.getAttribute("rel");if(abuseCookie.search(eval(currentComment.id))!=-1){currentAbuseLink.innerHTML=currentAbuseLink.getElementsByTagName('a')[0].innerHTML;$D.replaceClass(currentAbuseLink,"link-gr5ox",getAbuseClass(currentComment.id));}}}};var updateRatingsCookie=function(messageId,upOrDown){var arrRatingsCookie=(ratingsCookie)?ratingsCookie.split(","):[];if(arrRatingsCookie.push(messageId+upOrDown)>MAX_COOKIE_RATINGS){arrRatingsCookie=arrRatingsCookie.slice(1);}
var expireDate=new Date();expireDate.setFullYear(2030);ratingsCookie=arrRatingsCookie.join(",");AND.setCookie("commentRatings",ratingsCookie,expireDate);};var updateRatingCount=function(ratingEl,voteCount){var voteCountEl=$$("js-vote-count","span",ratingEl)[0];if(voteCount==0){$D.removeClass(ratingEl,"positive");$D.removeClass(ratingEl,"negative");voteCountEl.innerHTML="(0)";}
else{if(voteCount>0){$D.addClass(ratingEl,"positive");}
else{voteCount*=-1;$D.addClass(ratingEl,"negative");}
voteCountEl.innerHTML=voteCount;}};var getRatingClass=function(commentId){if(ratingsCookie){var match=new RegExp(commentId+"([\+\-])").exec(ratingsCookie);if(match){switch(match[1]){case"+":return" rated rated-up";case"-":return" rated rated-down";}}}
return"";};var updateAbuseCookie=function(commentId){var arrAbuseCookie=(abuseCookie)?abuseCookie.split(","):[];if(arrAbuseCookie.push(commentId)>MAX_COOKIE_RATINGS){arrAbuseCookie=arrAbuseCookie.slice(1);}
var expireDate=new Date();expireDate.setFullYear(2030);abuseCookie=arrAbuseCookie.join(",");AND.setCookie("reportAbuse",abuseCookie,expireDate,"/");};var getAbuseClass=function(commentId){return(abuseCookie&&abuseCookie.search(commentId+"")!=-1)?"gr3ox":"link-gr5ox";};var setFormValuesFromCookie=function(){var formEl=$$('post-comment-form','form','reader-comments')[0];if(typeof formEl!='undefined'){if(AND.getCookie('remember_me_cookie')&&typeof formEl.rememberMe!='undefined'){formEl.rememberMe.checked=true;}
if(AND.getCookie('reader_name_cookie')&&typeof formEl.name!='undefined'){formEl.name.value=AND.getCookie('reader_name_cookie');}
if(AND.getCookie('reader_town_cookie')&&typeof formEl.townAndCountry!='undefined'){formEl.townAndCountry.value=AND.getCookie('reader_town_cookie');}}};var setButtonLabel=function(text){if(buttonLabel){buttonLabel.innerHTML=text;}};var tabHandler=function(){viewAll=true;intellitrackerLog("index");toggleViewAll();};var intellitrackerLog=function(trackLocation){AND.Intellitracker.log({memberId:DM.intellitrackerTag,url:"http://www.dailymail.co.uk/comments/"+articleId+"/"+tabNames[tabs.tabIndex]+"/"+trackLocation});}
return{init:function(){rc=$("reader-comments");ratingsCookie=AND.getCookie("commentRatings");abuseCookie=AND.getCookie("reportAbuse");if(rc){var match=new RegExp("max\-comments\-([0-9]+)").exec(rc.className);maxComments=(match)?match[1]:MAX_COMMENTS;match=new RegExp("article\-id\-([0-9]+)").exec(rc.className);articleId=(match)?match[1]:null;defaultPaginationConfig={maxResults:100,page:1,articleId:articleId,greyStyle:true}
DM.DWRPagination.getInstance().init(loadComments,defaultPaginationConfig);$E.addListener(rc,"click",readerCommentsHandler,this,true);checkCookies();var rcTabs=$("rc-tabs");if(rcTabs){tabs=new DM.Tabs({container:rcTabs,activeClasses:"bdrgr5 ow-igr5-bx wogr5 link-wox",inactiveClasses:"bdrgr5 ow-igr2-bx xogr2 link-gr5ox",tabs:rcTabs.getElementsByTagName("li"),handler:tabHandler});}
if($('js-view-all-link')){buttonLabel=$('js-view-all-link').getElementsByTagName("span")[1];}
setFormValuesFromCookie();}
if($('report-abuse-comfirm')){updateAbuseCookie($('report-abuse-comfirm').className.split("|")[0]);}}};}
return{getInstance:function(){if(!uniqueInstance){uniqueInstance=constructor();}
return uniqueInstance;}}}();imageLightBoxGallery=function(el){this.galleryEl=$G(el);this.init();}
imageLightBoxGallery.prototype={scrollAnim:null,init:function(){$E.addListener(this.galleryEl,'click',this.lightBox_Click_Handler,this,true);this.overlay=$$('lightbox-overlay','div',this.galleryEl)[0];$E.addListener(this.overlay,'click',this.lightBox_Click_Handler,this,true);this.mainImage=$$('main-overlayimage','img',this.galleryEl)[0];this.mainImageHolder=$$('main-image-holder','div',this.galleryEl)[0];this.table=$$('gallery-overlaytable','table',this.galleryEl)[0];this.mainText=$$('mainText','p',this.table)[0];this.buyLink=$$('buy-link','a',this.table)[0];this.moreLink=$$('more-link','a',this.table)[0];this.backwardLink=$$('backwardLink','a',this.galleryEl)[0];this.forwardLink=$$('forwardLink','a',this.galleryEl)[0];this.closeButton=$$('x-closebutton','a',this.galleryEl)[0];$E.addListener(this.closeButton,'click',this.closeOverlay,this,true)
this.imageLinks=this.galleryEl.getElementsByTagName('a');this.totalImages=this.imageLinks.length;$E.addListener(this.forwardLink,'click',function(){if(this.currentImage+1>this.totalImages){this.loadImage(0);}else{this.loadImage(this.currentImage+1);}},this)
$E.addListener(this.backwardLink,'click',function(){if(this.currentImage-1==0){this.loadImage(this.totalImages);}else{this.loadImage(this.currentImage-1);}},this)},completeScrollAnim:function(e){},lightBox_Click_Handler:function(e){var elTarget=$E.getTarget(e);while(!$D.hasClass(elTarget,"lightbox-gallery")){if($D.hasClass(elTarget,'pagelinks')||$D.hasClass(elTarget,'link')){$E.stopEvent(e);this.showOverlay();if(e.target)targ=e.target;else if(e.srcElement)targ=e.srcElement;this.loadImage(targ);break;}
if($D.hasClass(elTarget.parentNode,'paging-controls')){$E.stopEvent(e);var imageItemsList=$$('imageItems');for(var i=0,n=imageItemsList.length;i<n;i++){var imageItems=imageItemsList[i];imageItems.scrollLeft+=90;}
break;}
if(elTarget.parentNode){elTarget=elTarget.parentNode;}
else{break;}}},loadImage:function(el){this.el=el;if(this.el.tagName!=='a'){this.el=this.el.parentNode;}
this.img=this.el.getElementsByTagName('img')[0];this.mainImageHolder.style.visibility='hidden';this.mainImage.style.display='block';this.mainImage.style.width='0';this.mainImage.style.height='0';this.mainImage.src=this.el.href;var lastSlash=this.el.getAttribute('href').lastIndexOf('/');var imageSplit=this.el.getAttribute('href').substring(lastSlash).split('.')[0].split('_');var imageDimensions=imageSplit[imageSplit.length-1].split('x');this.buyLink.style.display="none";this.dimensions={width:parseInt(imageDimensions[0]),height:parseInt(imageDimensions[1])}
this.animate(this.dimensions);},showOverlay:function(){if(!this.loaded){lightbox.init();this.overLayEl=document.createElement('div');this.overLayEl.className='lightbox-gallery hidden';document.body.appendChild(this.overLayEl);this.overLayEl.appendChild(this.overlay);var clearEl=document.createElement('div');clearEl.className='clear';this.overLayEl.appendChild(clearEl);this.loaded=true;}
if(this.overlay.style.display!=='block'){lightbox.lightbox();var arrayPageSize=lightbox.getPageSize();var arrayPageScroll=lightbox.getPageScroll();var lightboxTop=arrayPageScroll[1]+((arrayPageSize[3]-35-650)/2);this.overLayEl.style.top=(lightboxTop<0)?"0px":lightboxTop+"px";var lightboxWidth=(arrayPageSize[2]/2)-1025;this.overlay.style.left=(lightboxWidth<-517)?"-517px":lightboxWidth+"px";this.overlay.style.display='block';}},closeOverlay:function(){lightbox.close();this.overlay.style.display='none';},animate:function(s){if(this.anim){this.anim.stop();this.imageAnim.stop();}
this.mainText.innerHTML='';this.mainText.parentNode.style.width='0';this.mainText.parentNode.style.height='0';this.anim=new YAHOO.util.Anim(this.mainImage,{width:{from:0,to:s.width},height:{from:0,to:s.height}},0.5,YAHOO.util.Easing.easeOut);this.imageAnim=new YAHOO.util.Anim(this.mainImageHolder,{opacity:{from:0,to:1}},0.5);this.mainImageHolder.style.visibility='';$D.setStyle(this.mainImageHolder,"opacity",0);var that=this;function showImage(){that.mainText.parentNode.style.width=s.width+'px';that.mainText.parentNode.style.height='';that.mainText.innerHTML=that.img.alt;var tmpBuyLink=$$("js-buy-link","a",that.el.parentNode)[0];if(typeof tmpBuyLink!="undefined"&&tmpBuyLink.innerHTML!=""){that.buyLink.href=tmpBuyLink.href;that.buyLink.innerHTML=tmpBuyLink.innerHTML;that.buyLink.style.display="";}
else{that.buyLink.href="#";that.buyLink.innerHTML="";that.buyLink.style.display="none";}
var tmpMoreLink=$$("js-more-link","a",that.el.parentNode)[0];if(typeof tmpMoreLink!="undefined"&&tmpMoreLink.innerHTML!=""){that.moreLink.href=tmpMoreLink.href;that.moreLink.innerHTML='<span class="arrow-small-r"></span>'+tmpMoreLink.innerHTML;that.moreLink.style.display="";}
else{that.moreLink.href="#";that.moreLink.innerHTML="";that.moreLink.style.display="none";};that.imageAnim.animate();}
this.anim.onComplete.subscribe(showImage);this.anim.animate();}}
var lightbox={lightboxLoaded:false,overlay:'',init:function(){if(!this.lightBoxLoaded){this.overlay=document.getElementById("overlay");this.lightBoxLoaded=true;}},lightbox:function(){var arrayPageSize=this.getPageSize();var arrayPageScroll=this.getPageScroll();this.overlay.style.height=(this.getPageSize()[1]+'px');this.overlay.style.display='block';if(AND.isIE6())DM.IE6.hideSelects();},getPageSize:function(){var xScroll,yScroll;if(window.innerHeight&&window.scrollMaxY){xScroll=document.body.scrollWidth;yScroll=window.innerHeight+window.scrollMaxY;}else if(document.body.scrollHeight>document.body.offsetHeight){xScroll=document.body.scrollWidth;yScroll=document.body.scrollHeight;}else{xScroll=document.body.offsetWidth;yScroll=document.body.offsetHeight;}
var windowWidth,windowHeight;if(self.innerHeight){windowWidth=self.innerWidth;windowHeight=self.innerHeight;}else if(document.documentElement&&document.documentElement.clientHeight){windowWidth=document.documentElement.clientWidth;windowHeight=document.documentElement.clientHeight;}else if(document.body){windowWidth=document.body.clientWidth;windowHeight=document.body.clientHeight;}
var pageHeight,pageWidth;if(yScroll<windowHeight){pageHeight=windowHeight;}else{pageHeight=yScroll;}
if(xScroll<windowWidth){pageWidth=windowWidth;}else{pageWidth=xScroll;}
var arrayPageSize=new Array(pageWidth,pageHeight,windowWidth,windowHeight)
return arrayPageSize;},getPageScroll:function(){var yScroll;if(self.pageYOffset){yScroll=self.pageYOffset;}else if(document.documentElement&&document.documentElement.scrollTop){yScroll=document.documentElement.scrollTop;}else if(document.body){yScroll=document.body.scrollTop;}
var arrayPageScroll=new Array('',yScroll)
return arrayPageScroll;},close:function(){this.overlay.style.display='';if(AND.isIE6())DM.IE6.showSelects();}}
DM.ImageTagging=(function(){var arr=[];var register=function(id){arr.push(id);}
var init=function(){var hldr;for(var x=0,xlen=arr.length;x<xlen;x++){$E.addListener(arr[x],'mouseover',function(e){var ev=$E.getTarget(e);if(ev.tagName=='A')$D.addClass(ev.getAttribute('rel').split('|')[0]+'-tag','hover');},this,true);$E.addListener(arr[x],'mouseout',function(e){var ev=$E.getTarget(e);if(ev.tagName=='A')$D.removeClass(ev.getAttribute('rel').split('|')[0]+'-tag','hover');},this,true);}}
return{register:register,init:init}})();DM.LightboxManager={init:function(objs){DM.Lightbox.getInstance().init();var popupLinks=$$('lightboxPopupLink','a',objs[0].id);for(var i=0,len=popupLinks.length;i<len;i++){if(popupLinks[i].getAttribute('href').indexOf('null')===-1){$E.addListener(popupLinks[i],'click',function(e){if(!e)e=window.event;$E.stopEvent(e);DM.Lightbox.getInstance().open(this.getAttribute('href'),this.getAttribute('rel').split('!')[0]);});}
else{popupLinks[i].setAttribute('href',popupLinks[i].getElementsByTagName('img')[0].getAttribute('src'));}}}};DM.Lightbox=function(){var uniqueInstance;function constructor(){var events={open:new Y.CustomEvent('open'),close:new Y.CustomEvent('close')},overlay,container,containerElement,imgContainer,img,imgX,imgFader,imgCaption,imgCaptionText;function createOverlayElements(){overlay=$('overlay');container=$('lightbox-container');containerElement=$('lightbox');imgContainer=$('lightbox-img-container');img=$('lightbox-img');imgX=$('lightbox-close-img');imgFader=$('lightbox-fader');$E.addListener(imgContainer,'click',function(e){if(!e)e=window.event;$E.stopEvent(e);DM.Lightbox.getInstance().close();});imgCaption=$('lightbox-caption');imgCaptionText='';};function show(){if(AND.isIE6())DM.IE6.hideSelects();$D.setStyle(overlay,'display','block');$D.setStyle(overlay,'height',AND.getPageSize()[1]+'px');};function reveal(){var arrayPageSize=AND.getPageSize();var arrayPageScroll=AND.getPageScroll();var imgWidth=Number(img.naturalWidth||img.width);var imgHeight=Number(img.naturalHeight||img.height);var lightboxTop=arrayPageScroll[1]+((arrayPageSize[3]-35-imgHeight)/2);var lightboxLeft=((arrayPageSize[2]-imgWidth)/2);$D.setStyle(containerElement,'top',(lightboxTop<0)?"0px":lightboxTop+"px");$D.setStyle(containerElement,'left',(lightboxLeft<0)?"0px":lightboxLeft+"px");var divAttributes={height:{to:imgHeight},width:{to:imgWidth}};var hasCaption=(imgCaptionText!=''&&imgCaptionText!=null);$D.setStyle(img,'width',"0px");$D.setStyle(img,'height',"0px");$D.setStyle(img,'visibility',"hidden");$D.setStyle(imgFader,'display',"block");$D.setStyle(imgFader,'width',"0px");$D.setStyle(imgFader,'height',"0px");$D.setStyle(imgFader,'opacity',"1");$D.setStyle(imgX,'opacity',"0");$D.setStyle(imgX,'display',"none");$D.setStyle(imgCaption,'opacity',"0");$D.setStyle(imgCaption,'width',"0px");$D.setStyle(imgCaption,'display',(hasCaption)?'block':'none');imgCaption.innerHTML='';$D.setStyle(container,'left','0px');var containerAnim=new $Y.Anim(img,divAttributes,0.7,YAHOO.util.Easing.easeOut);containerAnim.onComplete.subscribe(function(){$D.setStyle(img,'visibility',"visible");if(hasCaption){imgCaption.innerHTML=imgCaptionText;$D.setStyle(imgCaption,'width',imgWidth+'px');}
var imgFaderAttributes={opacity:{to:0}};var imgCaptionAttributes={opacity:{to:1}};var imgXAttributes={opacity:{to:0.5}};var imageFaderAnim=new $Y.Anim(imgFader,imgFaderAttributes,0.7,YAHOO.util.Easing.easeOut);imageFaderAnim.onComplete.subscribe(function(){$D.setStyle(imgFader,'display','none');});var captionAnim=new $Y.Anim(imgCaption,imgCaptionAttributes,0.7,YAHOO.util.Easing.easeOut);var imageXAnim=new $Y.Anim(imgX,imgXAttributes,0.7,YAHOO.util.Easing.easeOut);imageFaderAnim.animate();captionAnim.animate();$D.setStyle(imgX,'display',"inline");imageXAnim.animate();});var faderAnim=new $Y.Anim(imgFader,divAttributes,0.7,YAHOO.util.Easing.easeOut);faderAnim.animate();containerAnim.animate();}
function hide(){if(AND.isIE6())DM.IE6.showSelects();$D.setStyle(container,'left','-10000px');$D.setStyle(overlay,'display','none');};return{init:function(){events.open.subscribe(show);events.close.subscribe(hide);},open:function(imgSrc,imgCap){if(!overlay)createOverlayElements();events.open.fire();imgCaptionText=imgCap;if(img.src!==imgSrc){imgContainer.removeChild(img);img=new Image();imgContainer.appendChild(img);img.id='lightbox-img';$E.addListener(img,'load',reveal);img.src=imgSrc;}
else{reveal();}
return this;},close:function(){events.close.fire();return this;}};}
return{getInstance:function(){if(!uniqueInstance){uniqueInstance=constructor();}
return uniqueInstance;}}}();(function(){if(typeof MyStoriesHelper=='undefined'){DM.mystories={Controller:{init:function(){}}};return;}
var CLS_ACTIONS='myst-actions',CLS_CHECKED='myst-checked',CLS_DISABLED='myst-disabled',CLS_LOADING='myst-loading',CLS_VISIBLE='myst-show',CLS_ARTICLE_PREFIX='myst-article-',EMPTY_FN=function(){},TXT_DISABLED='Added to My Stories',TXT_ENABLED='Add to My Stories',HTML_ENABLED='<span class="icon">&nbsp;</span><span class="linktext">'+TXT_ENABLED+'</span>';DM.mystories={Services:(function(){var S={processing:false,add:{bridge:function(el){if(el.className.indexOf(CLS_DISABLED)>-1)return;var o=el.getAttribute('rel').split('|');S.add.fn(o[0],o[1],el);},callback:function(){var el,r;if(arguments.length>1){el=arguments[0];r=arguments[1];}
else r=arguments[0];var success=(typeof r=="object");if(!success)alert(r);S.add._callback(el,success);delete S.add._callback;if(controller.rendered){controller.setLoading(false);controller.updateCount();}
S.processing=false;},fn:function(id,channel){if(!S.processing){S.processing=true;S.add._callback=controller.add||EMPTY_FN;var c=arguments[2]?$curry(S.add.callback,arguments[2]):S.add.callback;if(controller.rendered)
controller.setLoading(true);S.add.rpc(id,channel,c);}},rpc:MyStoriesHelper.addStory},get:{callback:function(r){S.get._callback(r);delete S.get._callback;if(controller.rendered)
controller.setLoading(false);},fn:function(callback){S.get._callback=callback||controller.open||EMPTY_FN;if(controller.rendered)
controller.setLoading(true);S.get.rpc(S.get.callback);},rpc:MyStoriesHelper.getMyStories},remove:{callback:function(r){var el,addedEls=$$(CLS_DISABLED,'a','content');for(var i=0,len=r.length;i<len;i++){for(var x=0,xLen=addedEls.length;x<xLen;x++){el=addedEls[x];if($D.hasClass(el,CLS_ARTICLE_PREFIX+r[i].articleId)){$D.removeClass(el,CLS_DISABLED);el.innerHTML=HTML_ENABLED;break;}}}
S.remove._callback(r);delete S.remove._callback;if(controller.rendered)
controller.setLoading(false);S.processing=false;},fn:function(ids,callback){if(!S.processing){S.processing=true;(ids.constructor==Array)||(ids=[ids]);S.remove._callback=callback||controller.remove||EMPTY_FN;if(controller.rendered)
controller.setLoading(true);S.remove.rpc(ids,S.remove.callback);}},rpc:MyStoriesHelper.removeStories}},DELEGATION_CLASSES=['myst-add','myst-get','myst-remove'],DELEGATION_MAP={'myst-add':S.add.bridge,'myst-get':S.get.fn,'myst-remove':S.remove.bridge},MAX_PARENT=4;var controller;var _delegate=function(evt){var el=evt.srcElement||evt.target,i=0;while(!(d=_findDelegate(el))&&i<MAX_PARENT&&el!==document.body)
el=el.parentNode;if(!d)return;$E.stopEvent(evt);d(el);};var _findDelegate=function(el){if(!el.className)return;var cls=el.className.split(' ');for(var i=0,len=cls.length;i<len;i++)
if(DELEGATION_MAP[cls[i]])
return DELEGATION_MAP[cls[i]];return false;};return{init:function(o){$E.addListener(document.body,'click',_delegate);controller=o||{};delete this.init;return this;},add:function(id,channel,callback){if(!id||!channel)return;S.add.fn(id,channel,callback);return this;},get:function(callback){S.get.fn(callback);return this;},remove:function(ids,callback){if(!ids)return;S.remove.fn(ids,callback);return this;}};}()),Controller:(function(){var ACTION={check:function(el){var id=el.parentNode.getAttribute('rel').split('|')[0];if(el.parentNode.className.indexOf(CLS_CHECKED)>-1){YAHOO.util.Dom.removeClass(el.parentNode,CLS_CHECKED);delete itemsToRemove[id];var c=0;for(var i in itemsToRemove){c++;}
if(c==0){map(resetActions().close.concat(actions.info),function(el){return YAHOO.util.Dom.addClass(el,CLS_VISIBLE);});}
return;}
YAHOO.util.Dom.addClass(el.parentNode,CLS_CHECKED);itemsToRemove[id]=el.parentNode;map(resetActions().close.concat(actions.remove),function(el){return YAHOO.util.Dom.addClass(el,CLS_VISIBLE);});},close:function(el){containerCh.style.display='none';containerOpen=false;actions.container[1].style.display='none';resizeShim();if(updateCount()>0){YAHOO.util.Dom.addClass(resetActions().open[0],CLS_VISIBLE);}else{resetActions();}},open:{fn:function(){if(getRemoveItems().length<1){S.get(ACTION.open.callback);return;}
containerCh.style.display='block';containerOpen=true;resizeShim();map(resetActions().close.concat(actions.remove),function(el){return YAHOO.util.Dom.addClass(el,CLS_VISIBLE);});},callback:function(r){var o=collate(r);var res=[];for(var k in o)
res.push(applyTemplate(k,o[k]));containerCh.innerHTML=res.join('');containerCh.style.display='block';if(!actions)actions=mapActions();actions.container[1].style.display='';containerOpen=true;resizeShim();map(resetActions().close.concat(actions.info),function(el){return YAHOO.util.Dom.addClass(el,CLS_VISIBLE);});updateCount();}},remove:{fn:function(){S.remove(getRemoveItems(),ACTION.remove.callback);},callback:function(){itemsToRemove={};if(updateCount()>0){ACTION.open.fn();}else{ACTION.close();}}},toggle:{fn:function(el){var list=YAHOO.util.Dom.getNextSibling(el);if(el.className.indexOf(CLS_VISIBLE)>-1){YAHOO.util.Dom.removeClass(el,CLS_VISIBLE);list.style.display='none';resizeShim();return;}
YAHOO.util.Dom.addClass(el,CLS_VISIBLE);list.style.display='';resizeShim();}}},DELEGATION_CLASSES=['myst-check','myst-close','myst-open','myst-remove','myst-toggle'],DELEGATION_MAP={'myst-icon':ACTION.check,'myst-close':ACTION.close,'myst-open':ACTION.open.fn,'myst-remove':ACTION.remove.fn,'myst-toggle':ACTION.toggle.fn},MAX_PARENT=2,S,actions,actionsLower,actionsUpper,containerCh,containerEl,containerOpen=false,items={},itemsToRemove={},shim,wrapper,tpl={ft:'</ul>',hd:function(channel,cls,count){return['<h2 class="myst-toggle myst-show ',cls,'"><span class="wocc"><span class="icon">&nbsp;</span><span class="myst-count ccolcc">',count,'</span> ',channel,'</span></h2>','<ul class="myst-channel ',channel,'">'].join('');},item:function(o,i){return['<li><a class="myst-check" href="',o.parsedArticles.articleURL,'" rel="',o.myStoriesId,'"><span class="myst-icon">&nbsp;</span>',o.parsedArticles.headline,'</a></li>'].join('');}};var _delegate=function(evt){var el=evt.srcElement||evt.target,i=0;while(!(d=_findDelegate(el))&&i<MAX_PARENT&&el!==document.body)
el=el.parentNode;if(!d)return;$E.stopEvent(evt);d(el);};var _findDelegate=function(el){if(!el.className)return;var cls=el.className.split(' ');for(var i=0,len=cls.length;i<len;i++)
if(DELEGATION_MAP[cls[i]])
return DELEGATION_MAP[cls[i]];return false;};var applyTemplate=function(t,o){var r=[];r.push(tpl.hd(t,o[0].channels.shortName,o.length));r=r.concat(map(o,tpl.item));r.push(tpl.ft);return r.join('');};var collate=function(r){var o={};map(r,function(obj){var k=obj.channels.displayName;if(!o[k])o[k]=[];o[k].push(obj);return obj;});return o;};var getRemoveItems=function(){var res=[];for(var $_ in itemsToRemove)
res.push($_);return res;};var map=function(a,fn){a||(a=[]);fn||(fn=function(x){return x;});var len=a.length,res=new Array(len);for(var i=0;i<len;i++)
res[i]=fn(a[i],i);return res;};var mapActions=function(){var fn=function(cls,el){return YAHOO.util.Dom.getElementsByClassName(cls,null,el)[0].parentNode;};var acn=YAHOO.util.Dom.getElementsByClassName(CLS_ACTIONS,'ul',containerEl);var cls=map(acn,$curry(fn,'myst-close'));var inf=map(acn,$curry(fn,'myst-info'));var opn=map(acn,$curry(fn,'myst-open'));var rmv=map(acn,$curry(fn,'myst-remove'));acn[1].style.display='none';return{container:acn,close:cls,info:inf,open:opn,remove:rmv,all:[].concat(cls).concat(inf).concat(opn).concat(rmv)};};var resetActions=function(){map(actions.all,function(el){return YAHOO.util.Dom.removeClass(el,CLS_VISIBLE);});return actions;};var resizeShim=function(){shim.style.height=containerEl.offsetHeight;shim.style.width=Dom.getStyle(containerEl,'width');};var setLoading=function(status){if(status===true){Dom.addClass(count,CLS_LOADING);return;}
Dom.removeClass(count,CLS_LOADING);};var updateCount=function(){var c=parseInt(YAHOO.Tools.getCookie('my_stories_cookie_count'));if(isNaN(c))c=0;count.innerHTML=c.toString();return c;};return{init:function(){$E.addListener(document.body,'click',_delegate);S=DM.mystories.Services.init(this);delete this.init;wrapper=$('my-stories');if(!wrapper)return this;$D.setStyle(wrapper.parentNode,"z-index","9000");this.rendered=true;containerEl=$('myst-container');containerCh=$('myst-channels');count=$('myst-count');shim=$('myst-shim');actions=mapActions();resetActions();containerCh.style.display='none';if(updateCount()>0)
YAHOO.util.Dom.addClass(actions.open[0],CLS_VISIBLE);delete this.init;return this;},add:function(el,success){var id=el.getAttribute('rel').split('|')[0];items[id]=el;el.innerHTML=TXT_DISABLED;Dom.addClass(el,CLS_DISABLED);if(success){if(containerOpen)
ACTION.open.fn();if(wrapper)
YAHOO.util.Dom.addClass(actions.open[0],CLS_VISIBLE);}},setLoading:setLoading,updateCount:updateCount}}())};}());DM.ExpansionArticlePageManager=(function(){var uniqueInstance;function constructor(){var target,storiesGroup,storyCounter,storyCounterText,channelAmount;var removeMyStories_callback=function(){storiesGroup=$D.getAncestorByClassName(target,'js-my-stories-group');storyCounter=$$('js-counter','span',storiesGroup)[0];storyCounterText=$$('js-text','span',storiesGroup)[0];channelAmount=storyCounter.innerHTML;storyCounter.innerHTML=--channelAmount;if(channelAmount==0){$D.setStyle(storiesGroup,'display','none');}else{if(channelAmount==1){storyCounterText.innerHTML='story';}
$D.setStyle($D.getAncestorByClassName(target,'article'),'display','none');}}
var removeStoriesHandler=function(e){$E.stopEvent(e);target=$E.getTarget(e);while(!$D.hasClass(target,'js-removestories-link')){target=target.parentNode;}
MyStoriesHelper.removeStories(target.getAttribute('rel').split('|')[0],removeMyStories_callback);};var moreHandler=function(e){$E.stopEvent(e);var targetEl=$E.getTarget(e);while(!$D.hasClass(targetEl,'js-more-link')){targetEl=targetEl.parentNode;}
var channelShortName=(targetEl.getAttribute('rel'))?targetEl.getAttribute('rel').split('|')[0]:"";if($D.hasClass(targetEl.parentNode.parentNode,'js-accordion')){var acordians=$$("js-accordion","div","content");for(var i=0,ilen=acordians.length;i<ilen;i++){if(targetEl.parentNode.parentNode!=acordians[i]&&$D.hasClass(acordians[i],'collapsed')){$D.removeClass(acordians[i],'collapsed');}}
if($D.hasClass(targetEl.parentNode.parentNode,'collapsed')){$D.removeClass(targetEl.parentNode.parentNode,'collapsed');if(document.forms["most-popular-stories-form"]){document.forms["most-popular-stories-form"].channel.value=channelShortName;}}else{$D.addClass(targetEl.parentNode.parentNode,'collapsed');}}else{if($D.hasClass(targetEl.parentNode.parentNode,'collapsed')){$D.removeClass(targetEl.parentNode.parentNode,'collapsed');if(document.forms["most-popular-stories-form"]){document.forms["most-popular-stories-form"].channel.value=channelShortName;}}else{$D.addClass(targetEl.parentNode.parentNode,'collapsed');}}};return{init:function(objs){for(var i=0,len=objs.length;i<len;i++){el=$(objs[i].id);if(!el)break;$E.addListener($$('js-more-link','a',el),'click',moreHandler,this,true);$E.addListener($$('js-removestories-link','a',el),'click',removeStoriesHandler,this,true);}}};}
return{getInstance:function(){if(!uniqueInstance){uniqueInstance=constructor();}
return uniqueInstance;}}})();DM.ShowcaseManager={init:function(objs){for(var i=0,len=objs.length;i<len;i++){el=$(objs[i].id);if(!el)break;new DM.Showcase(objs[i].id);}}};DM.Showcase=function(container){var events,thumbnails,mainImages;var inlineElements='img, span, strong, em, abbr';events={selectThumbnail:new Y.CustomEvent('selectThumbnail'),closeMainImage:new Y.CustomEvent('closeMainImage')};function init(){container=$(container);if(container){thumbnails=$$('thumbnails','ul',$$('products','',container)[0])[0];mainImages=$$('mainImages','ul',$$('products','',container)[0])[0];addEventHandlers();}};function addEventHandlers(){if(thumbnails){events.selectThumbnail.subscribe(hideMainImages);events.selectThumbnail.subscribe(showMainImage);Event.addListener(thumbnails,'click',handleClickThumbnails);};if(mainImages){events.closeMainImage.subscribe(hideMainImages);Event.addListener(mainImages,'click',handleClickMainImages);};};function handleClickThumbnails(event){var target,nodeName;target=Event.getTarget(event);nodeName=target.nodeName.toLowerCase();if(inlineElements.indexOf(nodeName)>-1){target=Dom.getAncestorByTagName(target,'a')||target;};if(target.nodeName.toLowerCase()==='a'){events.selectThumbnail.fire(target);Event.preventDefault(event);};};function handleClickMainImages(event){var target,nodeName;target=Event.getTarget(event);nodeName=target.nodeName.toLowerCase();if(inlineElements.indexOf(nodeName)>-1){target=Dom.getAncestorByTagName(target,'a')||target;};if(target.nodeName.toLowerCase()==='a'){if(Dom.hasClass(target,'close')){events.closeMainImage.fire();Event.preventDefault(event);};};};function showMainImage(type,args){var url,index,mainImage,height,width,animation;var id;function revealImage(){new Anim(mainImage.div,{opacity:{from:0,to:1}},0.3).animate();};url=args[0].href;index=url.lastIndexOf('#')+1;id=url.substr(index);mainImage=Dom.get(id);mainImage.div=$$('js-product-container','div',mainImage)[0];mainImage.img=mainImage.getElementsByTagName('img')[1];if($D.getStyle(mainImage,'height')=="auto"||$D.getStyle(mainImage,'height')=="0px"){var newHeight=mainImage.offsetHeight;}else{var newHeight=parseInt($D.getStyle(mainImage,'height'));}
Dom.setStyle(mainImage,'height',0);Dom.setStyle(mainImage,'width',0);Dom.setStyle(mainImage,'visibility','visible');Dom.setStyle(mainImage.div,'opacity',0);Dom.setXY(mainImage,Dom.getXY(args[0]));animation=new Anim(mainImage,{height:{from:0,to:newHeight},width:{from:0,to:250}},0.3,YAHOO.util.Easing.easeOut);animation.onComplete.subscribe(revealImage);animation.animate();};function hideMainImages(){var items,length,mainImage;items=mainImages.getElementsByTagName('li');length=items.length;for(var i=0;i<length;i++){mainImage=items[i];mainImage.img=mainImage.getElementsByTagName('img')[1];Dom.setStyle(mainImage.div,'opacity',0);Dom.setStyle(mainImage,'visibility','hidden');};};init();};DM.HealthManager=function(){var selectHandler=function(e){var target=$E.getTarget(e);if(target.tagName=="SELECT"){target.parentNode.className="pregnant-container cleared "+target.options[target.selectedIndex].value.replace(' ','-').toLowerCase();}};return{init:function(objs){for(var i=0,len=objs.length;i<len;i++){el=$(objs[i].id);if(!el)break;var selectEl=el.getElementsByTagName("select")[0];$E.addListener(selectEl,"change",selectHandler,this,true);selectEl.selectedIndex=0;}},doAnim:function(e,img){if(!e)e=window.event;$E.stopEvent(e);if(typeof img==="string"){img=$(img);}
img.src=img.getAttribute("rel");}};}();if(!DM){var DM={};}
DM.PollManager=function(){return{init:function(objs){for(var i=0,len=objs.length;i<len;i++){el=$(objs[i].id);if(!el)break;new DM.Poll(el).init();}}}}();DM.Poll=function(pollElement){var classes={pollDiv:'js-poll',pollQuestion:'js-poll-question',pollResults:'js-poll-results',pollResultsData:'js-poll-content',voteButton:'js-vote-button',radio:'js-radio',selectedRadio:'selected',closeButton:'js-close',showYesterdays:'js-show-yesterdays',showAll:'js-show-all',pollIdInput:'js-poll-id',channelIdInput:'js-channel-id',questionIdInput:'js-question-id',pollWide:'poll-wide'};var startTemplate=($D.hasClass(pollElement,'poll-wide'))?'<div class="poll-results-graph box cleared"><a class="js-close close" href="#"><span class="close-btn">&nbsp;</span>Close</a><p>POLL RESULTS </p><ul>':'<p>***question***</p><ul>';var resultsTemplate='<li class="cleared"><span class="results-text">***answer***</span><span class="results-bar" style="width: ***barLength***px;"></span><span class="results-score">***percentage***%</span></li>';var endTemplate='</ul><span>***message***</span></div>';var pollId=$$(classes.pollIdInput,'input',pollElement)[0].value;var questionId=$$(classes.questionIdInput,'input',pollElement)[0].value;var channelId;var showYesterdayLink=false;var replaceHtml=function(html,object){for(var item in object){if(html.indexOf('***')==-1){break;}
var testText='***'+item+'***';while(html.indexOf(testText)>-1){html=html.replace(testText,object[item]);}}
return html;}
var processVote_callback=function(pollVoteResponseVO){if(pollVoteResponseVO==null){return;}
var html=replaceHtml(startTemplate,pollVoteResponseVO.poll.pollQuestions[0]);for(var i=0,n=pollVoteResponseVO.poll.pollAnswers.length;i<n;i++){html+=replaceHtml(resultsTemplate,pollVoteResponseVO.poll.pollAnswers[i]);}
var tmp={};if(pollVoteResponseVO.pollAnswered||!showYesterdayLink){if(pollVoteResponseVO.pollAnswered){tmp.message="Oops! You have already voted on this topic"}else{tmp.message="";}}else{tmp.message="Thank you for voting"}
html+=replaceHtml(endTemplate,tmp);if(showYesterdayLink){$D.removeClass($$(classes.showYesterdays,'a',pollElement)[0],'hidden');$D.addClass($$(classes.showAll,'a',pollElement)[0],'hidden');}else{$D.addClass($$(classes.showYesterdays,'a',pollElement)[0],'hidden');$D.removeClass($$(classes.showAll,'a',pollElement)[0],'hidden');}
showYesterdayLink=false;var pollResults=$$(classes.pollResults,'div',pollElement)[0];var pollResultsData=$$(classes.pollResultsData,'div',pollResults)[0];var pollQuestion=$$(classes.pollQuestion,'div',pollElement)[0];pollResultsData.innerHTML=html;$D.addClass(pollQuestion,'hidden');$D.removeClass(pollResults,'hidden');};var processVote=function(){var radioEls=$$(classes.radio,'span',pollElement);if(radioEls.length==0){window.location='/debate/polls/poll.html?pollId='+pollId;}
var selectedRadioEls=$$(classes.selectedRadio,'span',pollElement);if(selectedRadioEls.length==0){return;}
var answerId=selectedRadioEls[0].parentNode.getElementsByTagName('input')[0].value;AjaxPoll.vote(pollId,answerId,questionId,processVote_callback);};var processClose=function(){$D.addClass($$(classes.pollResults,'div',pollElement)[0],'hidden');$D.removeClass($$(classes.pollQuestion,'div',pollElement)[0],'hidden');var showYesterdays=$$(classes.showYesterdays,'a',pollElement)[0];$D.removeClass($$(classes.showAll,'a',pollElement)[0],'hidden');if(!$D.hasClass(showYesterdays,'hidden')){$D.addClass(showYesterdays,'hidden');}};var toggleTicked=function(){var radioEls=$$(classes.radio,'span',pollElement);for(var i=0,n=radioEls.length;i<n;i++){var inputEl=radioEls[i].parentNode.getElementsByTagName('input')[0];if(inputEl.checked){$D.addClass(radioEls[i],classes.selectedRadio);}else{$D.removeClass(radioEls[i],classes.selectedRadio);}}};var pollHandler=function(e){var elTarget=$E.getTarget(e);while(!$D.hasClass(elTarget,classes.pollDiv)){if($D.hasClass(elTarget,classes.closeButton)){$E.stopEvent(e);processClose();break;}
if($D.hasClass(elTarget,classes.voteButton)){$E.stopEvent(e);processVote();showYesterdayLink=true;break;}
if($D.hasClass(elTarget,classes.showYesterdays)){$E.stopEvent(e);AjaxPoll.getYesterdaysPoll(channelId,pollId,processVote_callback);break;}
if($D.hasClass(elTarget,classes.radio)){$E.stopEvent(e);var inputEl=elTarget.parentNode.getElementsByTagName('input')[0];inputEl.checked=true;toggleTicked();break;}
elTarget=elTarget.parentNode;}};return{init:function(){$E.addListener(pollElement,"click",pollHandler,this,true);var channelInputs=$$(classes.channelIdInput,'input',pollElement);if(channelInputs.length>0){channelId=channelInputs[0].value;}}}}
DM.MirrorMirror=function(item){if(typeof item=='object'){this.item=item;this.initLinks(item);this.closeButtons(item);this.animating=false;}}
DM.MirrorMirror.prototype={initLinks:function(item){$E.addListener($$('js-mm-image-link','a',item),'click',this.showItem,this,true);},showItem:function(e){if(!e)var e=window.event;$E.stopEvent(e);if(!this.animating){this.hideItems(this.item);var target=$E.getTarget(e);while(target.tagName!="A"){target=target.parentNode;}
this.animateItem(target.id);}},animateItem:function(item,switchNum){this.animating=true;this.animItem=$G(item+'_overlay');this.opaque=$$('js-opaque','div',this.animItem)[0];this.switchNum=switchNum;var items=$$('js-mm-overlay','div',this.animItem.parentNode.parentNode);for(var i=0,len=items.length;i<len;i++){if(items[i].id!==this.animItem.id){this.otherItem=items[i];}}
var height=this.animItem.offsetHeight-26;var width=this.animItem.offsetWidth-26;this.animItem.style.width='0px';this.animItem.style.height='0px';this.animItem.style.visibility='visible';this.anim=new YAHOO.util.Anim(this.animItem,{width:{from:0,to:width},height:{from:0,to:height}},0.3,YAHOO.util.Easing.easeOut);this.opaqueAnim=new YAHOO.util.Anim(this.opaque,{opacity:{from:0,to:1}},0.3);$D.setStyle(this.opaque,"opacity",0);var that=this;function showImage(){that.otherAnimation.call(that);}
this.anim.onComplete.subscribe(showImage);this.anim.animate();},otherAnimation:function(){function showOtherImage(){var item=that.otherItem.id.substring(0,that.otherItem.id.length-8);that.animateItem.call(that,item,1);}
if(typeof this.switchNum==='undefined'){var that=this;this.opaqueAnim.onComplete.subscribe(showOtherImage);}else{this.animating=false;}
this.opaqueAnim.animate();},hideItems:function(){$D.setStyle($$('js-mm-overlay','div',this.item),"visibility","hidden");},closeButtons:function(item){$E.addListener($$('js-mm-close','img',item),'click',this.hideItems,this,true);}}
DM.MirrorMirrorManager={init:function(objs){for(var i=0,len=objs.length;i<len;i++){el=$(objs[i].id);if(!el)break;new DM.MirrorMirror(el);}}}
DM.CoffeeBreak={init:function(objs){var el=$(objs[0].id);if(el){AND.forEach(el.getElementsByTagName('a'),DM.CoffeeBreak.popWin);}},popWin:function(obj){$E.addListener(obj,"click",function(e){$E.preventDefault(e);window.open(obj.href,'','status=1,height=550,width=700');});}}
DM.Debate=function(){var uniqueInstance;function constructor(){var textStore;var setCursorAtEnd=function(textArea){if(textArea.createTextRange){var r=(textArea.createTextRange());r.moveStart('character',(textArea.value.length));r.collapse();r.select();}
textArea.scrollTop=textArea.scrollHeight;}
var getMessageText=function(node){if(node.nodeType==3){var text=node.data;textStore+=text;}else{var children=node.childNodes;for(var i=0,numChildren=children.length;i<numChildren;i++){if(node.className!="jive-quote"){getMessageText(children[i]);}}}
return textStore;}
var copyPasteText=function(e,targetElements){var element,container,userName,messageBody,quote,message;$E.preventDefault(e);textStore="";element=$E.getTarget(e);srcElement=$(element.id.substr(1));container=srcElement.parentNode.parentNode;userName=$$('js-user-name','span',container)[0].innerHTML;messageBody=$$('js-message-body','div',container)[0];message=getMessageText(messageBody);quote="{quote:title="+userName+" wrote...}"+message+"{quote}";for(var t=0,tlen=targetElements.length;t<tlen;t++){var target=targetElements[t];target.value=removeHTMLTags(quote)+"\n";if(target.counter){var counter=$(['messageForm1',target['name'],'countdown'].join('-'));if(targetElements[t].counter<target.value.length){target.value=target.value.substring(0,target.counter)};counter.innerHTML=target.counter-target.value.length;}}}
var removeHTMLTags=function(srcData){if(srcData){var strInputCode=srcData.replace(/&(lt|gt);/g,function(strMatch,p1){return(p1=="lt")?"<":">";});var strTagStrippedText=strInputCode.replace(/<\/?[^>]+(>|$)/g,"");return strTagStrippedText;}}
return{init:function(){var messageSubjects=$$("js-message-subject","input","content");if(messageSubjects[0]){messageSubjects[0].focus();}
var messageTextAreas=$$("js-message-textarea","textarea","content");$E.addListener($$("js-reply","a","content"),"click",function(e){for(var i=0,l=messageTextAreas.length;i<l;i++){messageTextAreas[i].value='';}
messageTextAreas[0].suspendrules=true;messageTextAreas[0].focus();$E.stopEvent(e);},this,true);$E.addListener($$("js-quotereply","a","content"),"click",function(e){copyPasteText(e,messageTextAreas);messageTextAreas[0].suspendrules=true;messageTextAreas[0].focus();setCursorAtEnd(messageTextAreas[0]);$E.stopEvent(e);},this,true);}};}
return{getInstance:function(){if(!uniqueInstance){uniqueInstance=constructor();}
return uniqueInstance;}}}();DM.DebateAvatar=function(){var uniqueInstance;function constructor(){var avatarForm,avatars;var avatarClickHandler=function(e){var targetEl=$E.getTarget(e);if(!$D.hasClass(targetEl,"selected")){var selectedAvatars=$$("selected","img",avatarForm);if(selectedAvatars.length>0){$D.removeClass(selectedAvatars[0],"selected");}
$D.addClass(targetEl,"selected");$D.getNextSibling(targetEl).checked=true;}}
var avatarOver=function(e){var targetEl=$E.getTarget(e);$D.replaceClass(targetEl,"bdrw","bdrcc");}
var avatarOut=function(e){var targetEl=$E.getTarget(e);$D.replaceClass(targetEl,"bdrcc","bdrw");}
return{init:function(objs){avatarForm=$(objs[0].id);$D.addClass(avatarForm,"enabled-js");avatars=avatarForm.getElementsByTagName("img");$E.addListener(avatars,"click",avatarClickHandler);if(AND.isIE6()){$E.addListener(avatars,"mouseover",avatarOver);$E.addListener(avatars,"mouseout",avatarOut);}}};}
return{getInstance:function(){if(!uniqueInstance){uniqueInstance=constructor();}
return uniqueInstance;}}}();DM.BCVideoManager=function(){var uniqueInstance;function constructor(){var videoHolders,numberVideos,videosLoaded,players;function init(objs){numberVideos=objs.length;players=[];videosLoaded=0;for(var i=numberVideos-1,el;i>=0;i--){el=$(objs[i].id);if(!el)break;players[players.length]=new DM.BCVideo(el);}}
function _initialisePlayers(){var i=players.length;var lastId=i-1;while(i--)players[i].initialise();var mostRecent=$$("js-most-recent-videos");if(mostRecent.length>0)players[lastId].linkToHomePageModule(mostRecent[0]);var mostPopular=$$("js-most-popular-videos");if(mostPopular.length>0)players[lastId].linkToHomePageModule(mostPopular[0]);}
window.onTemplateLoaded=function(message){if(++videosLoaded>=numberVideos){_initialisePlayers();}}
if(typeof createExperience!='undefined'){var createFunction=createExperience.toString();var newBody="var buffer = [];\n"
+"function _store(txt){buffer[buffer.length] = txt;}\n"
+createFunction.replace(/document\.write(ln)?/g,"_store")
+"var retVal = createExperience(config, flashVersion);\n"
+"return {html: buffer.join(\"\"), value: retVal};";eval("function _buildExperience(config, flashVersion) {"+newBody+"}");}
function createIn(holderElement,config,flashVersion){if(typeof _buildExperience!='undefined'){var experience=_buildExperience(config,flashVersion);holderElement.innerHTML=experience.html;return experience.value;}}
return{createIn:createIn,init:init}}
return{getInstance:function(){if(!uniqueInstance){uniqueInstance=constructor();}
return uniqueInstance;}}}();DM.BCVideo=function(element){var dwrStorage={};var config={videoId:null,videoRef:null,lineupId:null,playerTag:null,autoStart:false,preloadBackColor:"#FFFFFF",flashId:"DM_BCVideo_FlashObject_",wmode:"transparent",width:null,height:null,playerId:null};if($D.hasClass(element,"jsSmallVideo")){config.width=308;config.height=279;}else if($D.hasClass(element,"jsThinArticleVideo")){config.width=470;config.height=400;}else{config.width=636;config.height=525;}
var thisVideo=element.className.split("|");config.videoRef=thisVideo[0];config.playerId=thisVideo[1];if($D.hasClass(element,'js-autoplay')){config.autoStart=true;}
var objectId=DM.BCVideoManager.getInstance().createIn(element,config,8);var onLoadFunctionName="EventHandler_"+objectId+"_onTitleLoad";window[onLoadFunctionName]=function(ev){if(ev.parameters.title!=null){callFlashInstance(objectId,"loadTitleById",ev.parameters.title.id);if(dwrStorage[ev.parameters.title.referenceId]){_showTextInHomePagePlayer(dwrStorage[ev.parameters.title.referenceId]);}}else{alert("Error - cannot retreive video to play");}}
function _showTextInHomePagePlayer(data){var textHolder=$$("video-page-containers","div",$$("js-video-info","div")[0]);if(textHolder.length>0){textHolder[0].innerHTML=data;}}
function initialise(){callFlashInstance(objectId,"addEventListener","titleLoad",onLoadFunctionName);var nextSib=$D.getNextSibling(element);if($D.hasClass(nextSib,"js-video-carousel")){var scroller=$$("scroller",'',nextSib)[0];var itemList=$$("itemlist",'',scroller)[0];var items=Dom.getChildren(itemList);if(items.length>0){Event.addListener(itemList,'click',_swapVideo);}}}
this.initialise=initialise;function linkToHomePageModule(element){Event.addListener(element,'click',_swapOnHomePage);}
this.linkToHomePageModule=linkToHomePageModule;function _swapOnHomePage(event){var target=Event.getTarget(event);target=Dom.getAncestorByTagName(target,'a')||target;var vidId=target.getAttribute("rel");var videoInfo=($$("video-page-containers","div",target.parentNode)[0])?$$("video-page-containers","div",target.parentNode)[0]:{};var videoArticleData=videoInfo.innerHTML;delete videoInfo;if(vidId){$E.preventDefault(event);_storeArticleDetails({key:vidId,value:videoArticleData});}else{}}
function _storeArticleDetails(data){dwrStorage[data.key]=data.value;callFlashInstance(objectId,"fetchTitleByReferenceId",data.key);}
function _swapVideo(event){var target=Event.getTarget(event);target=Dom.getAncestorByTagName(target,'a')||target;var vidId=target.getAttribute("rel");if(vidId){$E.preventDefault(event);callFlashInstance(objectId,"fetchTitleByReferenceId",vidId);}else{}}
function _loadCss(css){callFlashInstance(objectId,"loadCSS",css);}}
DM.AccordionMenu=function()
{var YUD=YAHOO.util.Dom;var YUE=YAHOO.util.Event;var oMenuSetting={};var oMenuCache={};var dLastHoverTitle;YUD.addClass(document.documentElement,'accordion-menu-js');function getDT(e)
{var dEl=YUE.getTarget(e);if((e.tagName+'').toUpperCase()=='DD')
{var dt=e.previousSibling;while(dt)
{if(dt.tagName&&dt.tagName.toUpperCase()=='DT'){break;};dt=dt.previousSibling};if(!dt||dt.tagName.toUpperCase()!='DT'){return;}
else{return(dt.tagName==='DT')?dt:null};}
else if(e.clientX)
{var found=false;while(dEl.parentNode)
{if(YUD.hasClass(dEl,'a-m-t')){found=true;break;};dEl=dEl.parentNode;};if(!found){return null}
else{return(dEl.tagName==='DT')?dEl:null};};};function getDD(dt)
{if(!dt){return null;};var dd=dt.nextSibling;while(dd)
{if(dd.tagName&&dd.tagName.toUpperCase()=='DD'){break;};dd=dd.nextSibling;};if(!dd||dd.tagName.toUpperCase()!='DD'){return;}
else{return dd};};function expand(dl,dt,dd)
{dl.hasAnimation+=1;YUD.addClass(dd,'a-m-d-before-expand');var oAttr={height:{from:0,to:dd.offsetHeight}};YUD.removeClass(dd,'a-m-d-before-expand');var onComplete=function()
{oAnim.onComplete.unsubscribe(onComplete);oAnim.stop();YUD.removeClass(dd,'a-m-d-anim');YUD.addClass(dd,'a-m-d-expand');onComplete=null;dl.hasAnimation-=1;var dt=getDT(dd);YUD.addClass(dt,'a-m-t-expand');if(oMenuCache[dl.id]&&oMenuCache[dl.id].onOpen&&dd.style.height!='')
{oMenuCache[dl.id].onOpen({dl:dl,dt:dt,dd:dd});};dd.style.height='';};var onTween=function()
{if(dd.style.height)
{YUD.addClass(dd,'a-m-d-anim');oAnim.onTween.unsubscribe(onTween);onTween=null;dd.oAnim=null;};};if(dd.oAnim)
{dd.oAnim.stop();dd.oAnim=null;dl.hasAnimation-=1;};var oEaseType=YAHOO.util.Easing.easeOut;var seconds=0.5;if(oMenuCache[dl.id])
{oEaseType=oMenuCache[dl.id]['easeOut']?oEaseType:YAHOO.util.Easing.easeIn;seconds=oMenuCache[dl.id]['seconds'];if(!oMenuCache[dl.id]['animation'])
{var oAnim={onComplete:{unsubscribe:function(){}},stop:function(){}};onComplete();return;};};var oAnim=new YAHOO.util.Anim(dd,oAttr,seconds,oEaseType);oAnim.onComplete.subscribe(onComplete);oAnim.onTween.subscribe(onTween);oAnim.animate();dd.oAnim=oAnim;};function collapse(dl,dt,dd)
{dl.hasAnimation+=1;YUD.addClass(dd,'a-m-d-anim');var oAttr={height:{from:dd.offsetHeight,to:0}};var onComplete=function()
{oAnim.onComplete.unsubscribe(onComplete);YUD.removeClass(dd,'a-m-d-anim');YUD.removeClass(dd,'a-m-d-expand');dd.style.height='';dd.oAnim=null;onComplete=null;dl.hasAnimation-=1;var dt=getDT(dd);YUD.removeClass(dt,'a-m-t-expand');if(oMenuCache[dl.id]&&oMenuCache[dl.id].onOpen)
{oMenuCache[dl.id].onClose({dl:dl,dt:dt,dd:dd});};};if(dd.oAnim)
{dd.oAnim.stop();dd.oAnim=null;dl.hasAnimation-=1;};var oEaseType=YAHOO.util.Easing.easeOut;var seconds=0.5;if(oMenuCache[dl.id])
{oEaseType=oMenuCache[dl.id]['easeOut']?oEaseType:YAHOO.util.Easing.easeIn;seconds=oMenuCache[dl.id]['seconds'];if(!oMenuCache[dl.id]['animation'])
{var oAnim={onComplete:{unsubscribe:function(){}},stop:function(){}};onComplete();return;};};var oAnim=new YAHOO.util.Anim(dd,oAttr,seconds,oEaseType);oAnim.onComplete.subscribe(onComplete);oAnim.animate();dd.oAnim=oAnim;};function collapseAll(dl,dt,dd)
{var aOtherDD=YUD.getElementsByClassName('a-m-d-expand','dd',dl);for(var i=0;i<aOtherDD.length;i++)
{var otherDD=aOtherDD[i];if(otherDD!=dd)
{collapse(dl,null,otherDD);};};}
var onMenuMouseover=function(e)
{var dMenuTitle=getDT(e);if(!dMenuTitle){return;};if(dLastHoverTitle)
{YUD.removeClass(dLastHoverTitle,'a-m-t-hover');};YUD.addClass(dMenuTitle,'a-m-t-hover');dLastHoverTitle=dMenuTitle;YUE.preventDefault(e);return false;};var onMenuMouseout=function(e)
{var dMenuTitle=getDT(e);if(!dMenuTitle){return;};if(dLastHoverTitle&&dLastHoverTitle!=dMenuTitle)
{YUD.removeClass(dLastHoverTitle,'a-m-t-hover');YUD.removeClass(dLastHoverTitle,'a-m-t-down');};YUD.removeClass(dMenuTitle,'a-m-t-down');YUD.removeClass(dMenuTitle,'a-m-t-hover');dLastHoverTitle=null;YUE.preventDefault(e);return false;};var onMenuMousedown=function(e)
{var dMenuTitle=getDT(e);if(!dMenuTitle){return;};YUD.addClass(dMenuTitle,'a-m-t-down');YUE.preventDefault(e);return false;};var onMenuClick=function(e)
{var dt=getDT(e);if(!dt){return;};var dd=getDD(dt);if(!dd){return;};var dl=dt.parentNode;if(dl.hasAnimation==null)
{dl.hasAnimation=0;}
if(dl.hasAnimation>0){return;};YUD.removeClass(dt,'a-m-t-down');if(YUD.hasClass(dd,'a-m-d-expand'))
{collapse(dl,dt,dd);}
else
{if(oMenuCache[dl.id]&&oMenuCache[dl.id].dependent==false){}
else{collapseAll(dl,dt,dd);}
expand(dl,dt,dd);};YUE.preventDefault(e);return false;};YUE.on(document,'mouseover',onMenuMouseover);YUE.on(document,'mouseout',onMenuMouseout);YUE.on(document,'mousedown',onMenuMousedown);YUE.on(document,'click',onMenuClick);var oApi={openDtById:function(sId)
{var dt=document.getElementById(sId);if(!dt){return;};if(!YUD.hasClass(dt,'a-m-t')){return;};var dl=dt.parentNode;var dd=getDD(dt);if(dl.hasAnimation==null){dl.hasAnimation=0;};if(dl.hasAnimation>0){return;};if(YUD.hasClass(dd,'a-m-d-expand')){return;};if(oMenuCache[dl.id]&&oMenuCache[dl.id].dependent==false){}
else{collapseAll(dl,dt,dd);}
expand(dl,dt,dd);},closeDtById:function(sId)
{var dt=document.getElementById(sId);if(!dt){return;};if(!YUD.hasClass(dt,'a-m-t')){return;};var dl=dt.parentNode;var dd=getDD(dt);if(dl.hasAnimation==null){dl.hasAnimation=0;};if(dl.hasAnimation>0){return;};if(!YUD.hasClass(dd,'a-m-d-expand')){return;};collapse(dl,dt,dd);},setting:function(id,oOptions)
{if(!oOptions){return;};if(typeof(id)!='string'){return;};var setMunu=function(dl)
{dl=dl||this;dl.hasAnimation=0;oMenuCache[dl.id]={element:dl,dependent:true,onOpen:function(){},onClose:function(){},seconds:0.5,easeOut:true,openedIds:[],animation:true};oMenu=oMenuCache[dl.id];if(typeof(oOptions['animation'])=='boolean')
{oMenu['animation']=!!oOptions['animation'];};if(typeof(oOptions['dependent'])=='boolean')
{oMenu['dependent']=!!oOptions['dependent'];};if(typeof(oOptions['easeOut'])=='boolean')
{oMenu['easeOut']=!!oOptions['easeOut'];};if(typeof(oOptions['seconds'])=='number')
{oMenu['seconds']=Math.max(0,oOptions['seconds']);};if(typeof(oOptions['onOpen'])=='function')
{oMenu['onOpen']=oOptions['onOpen'];};if(typeof(oOptions['onClose'])=='function')
{oMenu['onClose']=oOptions['onClose'];};if(oOptions['openedIds'].shift)
{oMenu['openedIds']=oOptions['openedIds'];};for(var i=0;i<oMenu['openedIds'].length;i++)
{var sId=oMenu['openedIds'][i];var dt=document.getElementById(sId);if(dt&&dt.tagName.toUpperCase()=='DT')
{var dl=dt.parentNode;var dd=getDD(dt);expand(dl,dt,dd);}
else if(!dt)
{function onDtAvailable()
{var dt=this;if(dt.tagName.toUpperCase()=='DT')
{var dl=dt.parentNode;var dd=getDD(dt);expand(dl,dt,dd);};};YUE.onAvailable(sId,onDtAvailable);}};};if(document.getElementById(id))
{setMunu(document.getElementById(id))}
else
{YUE.onAvailable(id,setMunu);};}};return oApi;};DM.Cartoons=function(){var cartoon;var cartoonClickHandler=function(e){var elTarget=$E.getTarget(e);if(!elTarget.getAttribute("disabled")){if($D.hasClass(elTarget,'js-cartoon-next')){cartoon.indexCartoon.value=cartoon.indexNextCartoon.value;cartoon.monthYear.value=cartoon.monthNextYear.value;cartoon.submit();return true;}
if($D.hasClass(elTarget,'js-cartoon-previous')){cartoon.indexCartoon.value=cartoon.indexPrevCartoon.value;cartoon.monthYear.value=cartoon.monthPrevYear.value;cartoon.submit();return true;}}
$E.preventDefault(e);};return{init:function(objs){var el=$(objs[0].id);cartoon=el;$E.addListener(el,"click",cartoonClickHandler,this,true);}};}();DM.Opensearch=(function(){var uniqueInstance;function setCookieForOpenSearch(){var today=new Date();var zero_date=new Date(0,0,0);today.setTime(today.getTime()-zero_date.getTime());var cookie_expire_date=new Date(today.getTime()+(8*7*86400000));var cookie=AND.setCookie('mOpenSearch','true',cookie_expire_date,'/');}
function hasCookieForOpenSearch(){if(AND.getCookie('mOpenSearch')!=null){return true;}else{setCookieForOpenSearch();return false;}}
function constructor(){var frm;function submit(){if(!hasCookieForOpenSearch()){var favIconUrl="http://"+window.location.host+"/favicon.ico";var opensearchUrl="http://"+window.location.host+"/xml/opensearch.xml";if(window.external&&("AddSearchProvider"in window.external)){window.external.AddSearchProvider(opensearchUrl);}else{if(window.sidebar&&("addSearchEngine"in window.sidebar)){window.sidebar.addSearchEngine(opensearchUrl,favIconUrl,"Mail Online Search","");}else{}}}}
return{init:function(){if(document.searchForm){frm=document.searchForm;var btn=frm.getElementsByTagName("button")[0];$E.addListener(btn,"click",submit);}},submit:submit};}
return{getInstance:function(){if(!uniqueInstance){uniqueInstance=constructor();}
return uniqueInstance;}};})();DM.Footer=function(){var el=$('footer'),container=(el)?el.getElementsByTagName('ul')[0]:null,tabs=(container)?$$('dm-tab','li',container):null;if(el&&container&&tabs){new DM.Tabs({container:container,tabs:tabs,tabPanes:$$('dm-tab-pane','div',el)});}}
DM.AzStarSearch={init:function(objs){var el,container;for(var i=0,len=objs.length;i<len;i++){el=$(objs[i].id);if(!el)break;container=el.getElementsByTagName('ul')[0];new DM.Tabs(AND.extendObject({container:container,tabs:container.getElementsByTagName('li'),tabPanes:$$('dm-tab-pane','div',el),activeClasses:'bdrcc link-wocc',inactiveClasses:'bdrcc ow-igr2-bx link-ccogr2'},objs[i]));}}}
DM.StyleStoreSearch=(function(){var uniqueInstance;function constructor(){var ERROR_TEXT="Please enter a search phrase";function focusHandler(e){var target=$E.getTarget(e);if(target.value==target.alt||target.value==ERROR_TEXT){target.value="";$D.removeClass(target,"gr3ox");$D.removeClass(target,"ccox");}}
function blurHandler(e){var target=$E.getTarget(e);if(target.value.replace(/^\s\s*/,"").replace(/\s\s*$/,"")==""){target.value=target.alt;$D.addClass(target,"gr3ox");}}
function clickHandler(e){var target=$E.getTarget(e);var inp=$D.getPreviousSibling(target);if(inp.value.replace(/^\s\s*/,"").replace(/\s\s*$/,"")==""||inp.value==inp.alt||inp.value==ERROR_TEXT){inp.value=ERROR_TEXT;$D.addClass(inp,"ccox");$E.stopEvent(e);}}
return{init:function(objs){for(var i=0,len=objs.length;i<len;i++){el=$(objs[i].id);if(!el)break;$E.addListener($$("js-search-phrase","input",el)[0],"focus",focusHandler);$E.addListener($$("js-search-phrase","input",el)[0],"blur",blurHandler);$E.addListener(el.getElementsByTagName("button")[0],"click",clickHandler);}}}}
return{getInstance:function(){if(!uniqueInstance){uniqueInstance=constructor();}
return uniqueInstance;}}})();DM.TravelSearch=function(){var uniqueInstance;function constructor(){function mySelectHandler(type,args,obj){var selected=args[0];var container;if(obj.id=="js-calendar-container_t"){container=$("js-calendar-container");}
this.date=this._toDate(selected[0]);var u_date=this.date.getDate();var u_month=this.date.getMonth()+1;var u_year=this.date.getFullYear();container.style.display="none";repopulateDropdowns(u_date,u_month,u_year);}
function repopulateDropdowns(u_date,u_month,u_year){$("depdate-day").value=u_date;$("depdate-month").value=u_month;$("depdate-year").value=u_year;}
function showDisplay(con){var c=$(con);c.style.display=(c.style.display=="block")?"none":"block";}
function validateForm(e){if($("from").value=="UNDEFINED"){$("js-error-departure").innerHTML="Please select your departure airport";$D.setStyle($("js-error-departure"),"display","block");$E.preventDefault(e);}else{$D.setStyle($("js-error-departure"),"display","none");}
if($("to").value.length<1||$("to").value=="Please type your destination"){$("js-error-destination").innerHTML="Please type in your destination or click 'More search options' to see the list of destinations available";$D.setStyle($("js-error-destination"),"display","block");$E.preventDefault(e);}else{$D.setStyle($("js-error-destination"),"display","none");}}
return{init:function(){Event.addListener("js-submit-button","click",validateForm);if(document.getElementById("js-calendar-container")!=null){Event.addListener("js-dateFromLink","click",function(){showDisplay("js-calendar-container");});var dateRange=new Date();dateRange.setTime(dateRange.getTime()+(1000*60*60*24*3));var monthnumber=dateRange.getMonth()+1;var monthday=dateRange.getDate();var yearMin=dateRange.getFullYear();var yearMax=dateRange.getFullYear()+1;var dateRange_start=monthnumber+"/"+monthday+"/"+yearMin;var dateRange_end=monthnumber+"/"+monthday+"/"+yearMax;var cal1=new YAHOO.widget.Calendar("js-calendar-container",{pagedate:"10/2008",mindate:dateRange_start,maxdate:dateRange_end});cal1.cfg.setProperty("pagedate",monthnumber+"/"+yearMin);cal1.selectEvent.subscribe(mySelectHandler,cal1,true);cal1.render();var j_a=Dom.getElementsByClassName('tclose','a');for(var i=0,l=j_a.length;i<l;i++){j_a[0].className='topen';}
var j_li=Dom.getElementsByClassName('topen','li');for(var x=0,len=j_li.length;x<len;x++){j_li[x].className='tclose';}}}}}
return{getInstance:function(){if(!uniqueInstance){uniqueInstance=constructor();}
return uniqueInstance;}}}();function clearTextElement(x){document.getElementById(x).value="";}
function setDepartureDate(){var dateRange=new Date();dateRange.setTime(dateRange.getTime()+(1000*60*60*24*3));var monthnumber=dateRange.getMonth()+1;var monthday=dateRange.getDate();var year=dateRange.getFullYear();$("depdate-day").value=monthday;$("depdate-month").value=monthnumber;$("depdate-year").value=year;}
function showchildren(numChildren){var maxChildren=5;if(numChildren>0){$("js-childages").style.display="block";for(x=1;x<=maxChildren;x++){if(x<=numChildren){$("js-childage-"+x).style.display="block";}else{$("js-childage-"+x).style.display="none";}}}else{$("js-childages").style.display='none';}}
DM.DWRPagination=function(){var uniqueInstance;function constructor(){var arrPaginationContainers,externalHandler,objConfig={maxResults:100,page:1,showPageNumber:true,showPagingOptions:false,greyStyle:false};function clickHandler(e){$E.stopEvent(e);var target=$E.getTarget(e);if(target.tagName=="A"){objConfig.page=parseInt(target.getAttribute("rel"));externalHandler(objConfig);}}
return{init:function(fHandler,oConfig){externalHandler=fHandler;AND.extendObject(objConfig,oConfig);arrPaginationContainers=$$("pagination-container","div","content");$E.addListener(arrPaginationContainers,"click",clickHandler);},doPagination:function(oPagination){if(oPagination&&oPagination.totalNumberOfPages>1&&arrPaginationContainers.length>0){var strHtml="";var arrLinks=["","","","",""];var linkClass="link-ccox";var pageSpan="<span>Page</span>";if(objConfig.showPageNumber){strHtml+='<div class="sch-pagesummary">Page '+oPagination.offSet+' of '+oPagination.totalNumberOfPages+'</div>';}
if(objConfig.showPagingOptions){}
if(oPagination.previousOffSet>0){arrLinks[0]='<a href="#" rel="'+oPagination.previousOffSet+'">Previous</a>';}
for(var i=0,len=oPagination.prePages.length;i<len;i++){arrLinks[1]+='<a class="page-number bdrgr3" href="#" rel="'+oPagination.prePages[i]+'">'+oPagination.prePages[i]+'</a>';}
arrLinks[2]='<span class="page-number bdrgr3 bogr2">'+oPagination.offSet+'</span>';for(var i=0,len=oPagination.postPages.length;i<len;i++){arrLinks[3]+='<a class="page-number bdrgr3" href="#" rel="'+oPagination.postPages[i]+'">'+oPagination.postPages[i]+'</a>';}
if(oPagination.hasNext>0){arrLinks[4]='<a href="#" rel="'+oPagination.nextOffSet+'">Next</a>';}
if(objConfig.greyStyle){linkClass="link-gr5ox";pageSpan="";}
strHtml+='<div class="pagination bdrcc '+linkClass+' linkro-box">'+'<div class="float-r">'+
pageSpan+
arrLinks.join("")+'</div>'+'</div>';for(var i=0,len=arrPaginationContainers.length;i<len;i++){arrPaginationContainers[i].innerHTML=strHtml;}
$D.setStyle(arrPaginationContainers,"display","block");}else{$D.setStyle(arrPaginationContainers,"display","none");}},hide:function(){$D.setStyle(arrPaginationContainers,"display","none");}};}
return{getInstance:function(){if(!uniqueInstance){uniqueInstance=constructor();}
return uniqueInstance;}}}();DM.RSS={init:function(objs){var el,container;for(var i=0,len=objs.length;i<len;i++){el=$(objs[i].id);if(!el)break;container=el.getElementsByTagName('ul')[0];new DM.Tabs(AND.extendObject({container:container,tabs:container.getElementsByTagName('li'),tabPanes:$$('dm-tab-pane','div',el),activeClasses:'bdrcc link-wocc',inactiveClasses:'bdrgr4 ow-igr2-bx link-bogr2',handler:function(){var curr=this.getCurrentTab();var prev=this.getPreviousTab();$D.replaceClass($$('xocc','span',prev),'xocc','xogr4');$D.replaceClass($$('xogr4','span',curr),'xogr4','xocc');this.container.className=this.container.className.replace(this.container.className.split(' ')[0],curr.className.split('|')[0]);}},objs[i]));}}}
DM.Digg=function(){var diggTemplate,diggLoaded=[],storyContainer,tabs,commands;var tabHandler=function(){if(!diggLoaded[tabs.tabIndex]){AND.JSONscriptRequestManager.getScript({scriptUrl:commands[tabs.tabIndex],callback:DM.Digg.load});}}
return{init:function(){var relatedEl=($("js-article-text"))?$("js-article-text").getElementsByTagName("h1")[0]:$$("current","a",$$("nav-secondary","content","div")[0])[0];commands=["http://digg.com/tools/services?type=javascript&endPoint=/stories/popular&count=6&sort=promote_date-desc&domain=dailymail.co.uk&size=a","http://digg.com/tools/services?type=javascript&endPoint=/stories/upcoming&count=6&sort=digg_count-desc&domain=dailymail.co.uk&size=a","http://digg.com/tools/services?type=javascript&endPoint=/stories/popular&search="+escape(relatedEl.innerHTML.toLowerCase())+"&count=6&sort=promote_date-desc&domain=dailymail.co.uk&size=a"];diggTemplate=new AND.Template('<li>'+'<a href="{href}" class="bdrgr3 cleared" target="_blank">'+'<img src="{img}" width="30" height="30" alt="{alt}" />'+'<span class="headline">'+'<span class="arrow-small-r"></span>'+'<span>{headline}</span>'+'</span>'+'<span class="digg-count">{count}</span>'+'</a>'+'</li>');storyContainer=$("digg-stories");tabs=new DM.Tabs({container:$("digg-tabs"),activeClasses:"xow bdrgr3 ow-iw-bx",inactiveClasses:"xogr2 bdrgr3 ow-igr2-bx",tabs:$("digg-tabs").getElementsByTagName("li"),tabPanes:$("digg-stories").getElementsByTagName("div"),handler:tabHandler,callbackOnLoad:true});},load:function(data){var story,imgSrc,tmp="";for(var i=0,len=data.stories.length;i<len;i++){story=data.stories[i];imgSrc=(!story.thumbnail||story.thumbnail.src=="")?G_IMG_SRV+"/i/furniture/modules/digg_widget/m.png":story.thumbnail.src;tmp+=diggTemplate.apply({href:story.href,img:imgSrc,alt:story.title,headline:story.title,count:story.diggs});}
tabs.getCurrentTabPane().innerHTML="<ul>"+tmp+"</ul>";diggLoaded[tabs.tabIndex]=true;},showDiggButton:function(){if(document.referrer.indexOf("digg.co")!=-1){$D.removeClass($("digg-button"),"hidden");}}}}();DM.Tickers={init:function(objs){for(var i=0,len=objs.length;i<len;i++){el=$(objs[i].id);if(!el)break;new DM.Ticker(AND.extendObject({container:el.getElementsByTagName('ul')[0]},objs[i]));}}}
DM.Ticker=function(config){if(!config.container)return false;var timer;var self=this;var tick=function(){switch(self.animStyle){case'swipe':$D.setStyle(self._tickerItems[self._currentItem],'left','-10000px');self._currentItem=(self._currentItem+1)%self._tickerItems.length;self._anim.setEl(self._tickerItems[self._currentItem]);self._anim.animate();break;case'dual-fade':self._anim.animate();self._nextAnim.animate();break;case'fade':default:self._anim.animate();}
timer=setTimeout(tick,self.tickSpeed*1000);}
AND.extendObject(this,config);this._tickerItems=this.container.getElementsByTagName(this.itemTag);this._setupAnimation();timer=setTimeout(tick,this.tickSpeed*1000);};DM.Ticker.prototype={container:null,itemTag:'li',animStyle:'fade',animSpeed:2,tickSpeed:10,_currentItem:0,_tickerItems:[],_anim:null,_nextAnim:null,_setupAnimation:function(){switch(this.animStyle){case'swipe':$D.setStyle(this._tickerItems[this._currentItem],'left','0');this._anim=new YAHOO.util.Anim(this._tickerItems[this._currentItem],{left:{from:320,to:0}},this.animSpeed,YAHOO.util.Easing.easeOut);break;case'dual-fade':for(var i=0,len=this._tickerItems.length;i<len;i++){if(i!=0)$D.setStyle(this._tickerItems[i],'opacity','0');$D.setStyle(this._tickerItems[i],'left','0');}
this._anim=new YAHOO.util.Anim(this._tickerItems[this._currentItem],{opacity:{from:1,to:0}},this.animSpeed,YAHOO.util.Easing.easeOut);this._currentItem=(this._currentItem+1)%this._tickerItems.length;this._nextAnim=new YAHOO.util.Anim(this._tickerItems[this._currentItem],{opacity:{from:0,to:1}},this.animSpeed,YAHOO.util.Easing.easeOut);this._anim.onComplete.subscribe(function(){this._anim.setEl(this._tickerItems[this._currentItem]);this._currentItem=(this._currentItem+1)%this._tickerItems.length;this._nextAnim.setEl(this._tickerItems[this._currentItem]);},this,true);break;case'fade':default:for(var i=0,len=this._tickerItems.length;i<len;i++){if(i!=0)$D.setStyle(this._tickerItems[i],'opacity','0');$D.setStyle(this._tickerItems[i],'left','0');}
this._anim=new YAHOO.util.Anim(this._tickerItems[this._currentItem],{opacity:{from:1,to:0}},this.animSpeed,YAHOO.util.Easing.easeOut);this._nextAnim=new YAHOO.util.Anim(this._tickerItems[this._currentItem],{opacity:{from:0,to:1}},this.animSpeed,YAHOO.util.Easing.easeOut);this._anim.onComplete.subscribe(function(){this._currentItem=(this._currentItem+1)%this._tickerItems.length;this._nextAnim.setEl(this._tickerItems[this._currentItem]);this._nextAnim.animate();},this,true);this._nextAnim.onComplete.subscribe(function(){this._anim.setEl(this._tickerItems[this._currentItem]);},this,true);}}}
DM.FormValidator={};DM.FormValidator.Manager=function(){var forms=[];return{register:function(form){forms.push(form);},init:function(){for(var i=0,len=forms.length;i<len;i++){new DM.FormValidator.validate(forms[i]);}}}}();DM.FormValidator.validate=function(obj){this.init(obj);};DM.FormValidator.validate.prototype={form:null,rules:{'mandatory':{'if':{'value1':'value','method':'empty','value2':''},'then':'error("Please provide a value for this field.")'},'email':{'if':{'value1':'value','method':'matches','value2':/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i},'else':'error("Please provide a valid email address.")'}},types:{'text':'blur focus','password':'blur','textarea':'blur focus keyup','radio':'click','checkbox':'click','select-one':'change','form':'submit reset mouseover mouseout'},init:function(form){this.form=$(form.id);if(!this.form)return;var that=this;this.rules=AND.extendObject(this.rules,form.custom_rules||{});this.form.rules=[];var els=$$('js-validate','',this.form);for(var i=0,l=els.length;i<l;i++){var el=els[i];el.rules=[];var keys=el.className.split('|');for(var j=0,m=keys.length-1;j<m;j++){if(this.rules[keys[j]]){var rule=AND.extendObject({field:els[i],'if':'','then':'','else':'',onstart:false},this.rules[keys[j]]);el.rules.push(rule);this.form.rules.push(rule);if(rule.onstart){this.runRule(rule);}}}
if($D.hasClass(el,'js-defaultvalue')&&el.title&&el.title!=''){el.defaultvalue=true;if(el.value==''){el.value=el.title;}}
if($D.hasClass(el,'js-countdown')){var counter=$([this.form.id,el['name'],'countdown'].join('-'));if(counter&&parseInt(counter.innerHTML)!=NaN){el.counter=parseInt(counter.innerHTML);}}
if($D.hasClass(el,'js-expand')&&el.rows){el.expand=true;}
var evs=this.types[el.type].split(' ');for(var j=0,m=evs.length;j<m;j++){$E.addListener(el,evs[j],this.eHandler,that,true);}}
var evs=this.types['form'].split(' ');for(var i=0,l=evs.length;i<l;i++){$E.addListener(that.form,evs[i],this.eHandler,that,true);}},eHandler:function(e){var target=$E.getTarget(e);var that=this;switch(e.type){case'mouseover':if($D.hasClass(target,'js-tooltip')){$D.addClass(target.parentNode,'tooltip-on');}
break;case'mouseout':if($D.hasClass(target,'js-tooltip')){$D.removeClass(target.parentNode,'tooltip-on');}
break;case'reset':setTimeout(function(){that.runRules(target,true);},10);break;case'submit':if(!that.runRules(target)){$E.stopEvent(e);}else{if(that.form.submitextras){that.form.submitextras(that.form)}}
break;case'focus':if(target.defaultvalue&&target.value==target.title){target.value='';}
if(target.expand){target.rows=target.rows*2;target.expand=false;}
case'keyup':if(target.counter){var counter=$([this.form.id,target['name'],'countdown'].join('-'));if(target.counter<target.value.length){target.value=target.value.substring(0,target.counter)};counter.innerHTML=target.counter-target.value.length;}
break;case'blur':if(target.defaultvalue&&target.value==''){target.value=target.title;}
default:if(!target.suspendrules){this.runRules(target);}}
if(e.type!='focus'&&target.suspendrules){target.suspendrules=null;}},runRules:function(el,onstart){var valid=true;var container=(el.tagName==='FORM')?el:this.field(el);var errs=$$('errors','',container);for(var i=0,l=errs.length;i<l;i++){errs[i].innerHTML='';errs[i].style.display='none';}
var failed=$$('failed','',container);for(var i=0,l=failed.length;i<l;i++){$D.removeClass(failed[i],'failed');}
var rules=el.rules;for(var i=0,l=rules.length;i<l;i++){if(!onstart||(onstart&&rules[i].onstart)){valid=this.runRule(rules[i])&&valid;}}
return valid;},runRule:function(rule){var el=rule.field;var err=$$('errors','',this.field(rule.field))[0];var result;var value1=this[rule['if'].value1](el);var value2=rule['if'].value2;if(typeof value2==='number'){Number(value1)};var method=rule['if'].method;switch(method){case'matches':result=(new RegExp(value2)).test(value1);break;case'empty':value1=AND.trim(value1);result=(value1=='')||(el.defaultvalue&&value1==el.title);break;default:eval('result =  value1'+method+'value2');break;}
var error=function(param){if(!$D.hasClass(el,'failed')){var msg=document.createElement('span');msg.innerHTML=param;err.appendChild(msg);err.style.display='';$D.addClass(el,'failed');}
return false;};var show=function(param){$(param).style.display='';return true;};var hide=function(param){$(param).style.display='none';return true;};if(result&&rule['then']!=''){return eval(rule['then']);}
if(!result&&rule['else']!=''){return eval(rule['else']);}
return true;},field:function(param){return $([this.form.id,param['name'],'field'].join('-'));},value:function(param){if(param.type=='checkbox'||param.type=='radio'){var values=[];var els=this.field(param).getElementsByTagName('input');for(var i=0,l=els.length;i<l;i++){if(els[i].checked){values.push(els[i].value);}}
return values.join(',');}
return param.value;},'length':function(param){return this.value(param).length;}}
DM.Tools={init:function(objs){for(var i=0,len=objs.length;i<len;i++){el=$(objs[i].id);if(!el)break;container=el.getElementsByTagName('ul')[0];new DM.Tools.Tabs(AND.extendObject({container:container,tabs:container.getElementsByTagName('li'),tabPanes:$$('dm-tab-pane','div',el),activeClasses:'bdrcc link-wox xocc',inactiveClasses:'bdrcc ow-igr2-bx link-ccox xogr2'},objs[i]));}}}
DM.Tools.Tabs=function(config){DM.Tools.Tabs.superclass.constructor.call(this,config);};YAHOO.lang.extend(DM.Tools.Tabs,DM.Tabs);DM.Tools.Tabs.prototype._clickHandler=function(e){this.el=$(this.id);if(!this.getData){var sel=$$('js-makers','select',this.el)[0];if(sel){AND.JSONscriptRequestManager.getScript({scriptUrl:"http://api.carsource.co.uk/json-manufacturers-list.php",callback:function(data){for(var i=0,len=data.manufacturer.length;i<len;++i){var el=document.createElement("option");el.text=el.value=data.manufacturer[i].value;sel.options.add(el);}}});}
this.getData=true;}
DM.Tools.Tabs.superclass._clickHandler.call(this,e);var tab=this.getCurrentTab();this.el.className=this.el.className.replace(this.el.className.split(' ')[0],tab.className.split('|')[0]);}
DM.Horoscopes={init:function(objs){swfobject.embedSWF("/flash/horoscopes.swf","horoscope-flash","636","500","9.0.0",null,{xmlLocation:"/coffeebreak/horoscopes/horoscope.xml"},{allowscriptaccess:"always"},null,function(e){if(e.success){$D.replaceClass($("horoscope-text"),"js-hide","usability");}else{$D.removeClass($("horoscope-text"),"js-hide");}});}};DM.PictureSwap=(function(){var img;var swap=function(e){var target=$E.getTarget(e);if(target.tagName=='A'){img.setAttribute('src',target.getAttribute('rel').split('|')[0]);}}
return{init:function(objs){for(var i=0,len=objs.length;i<len;i++){el=$(objs[i].id);if(!el)break;img=el.getElementsByTagName('img')[0];if(!img)break;$E.addListener(el,'mouseover',swap);}}}})();DM.Carousels={};DM.Carousels.Manager=function(){var carousels=[];return{register:function(id,type){carousels.push({id:id,type:type});},init:function(){for(var i=0,len=carousels.length;i<len;i++){switch(carousels[i].type){case'imageSwap':new DM.Carousels.imageSwapCarousel(carousels[i].id,{fireSelect:true});break;case'rollover':new DM.Carousels.rolloverCarousel(carousels[i].id,{fireSelect:true});break;case'vertical':new DM.Carousels.carousel(carousels[i].id,{orientation:'vertical'});break;case'popup':new DM.Carousels.popupCarousel(carousels[i].id,{fireSelect:true});break;case'lightBox':new DM.Carousels.lightBoxCarousel(carousels[i].id,{fireSelect:true});break;case'info':new DM.Carousels.infoCarousel(carousels[i].id);break;default:new DM.Carousels.carousel(carousels[i].id);break;}}}}}();DM.Carousels.carousel=function(container,options){this.container=$G(container);this.options=AND.extendObject({orientation:'horizontal',timeout:1000,updateFrequency:15000,scrollMethod:Y.Easing.easeOut,scrollDuration:1},options);this.classes={scroller:'scroller',itemList:'itemlist',pagingControls:'paging-controls'};this.events={deselectItem:new Y.CustomEvent('deselect'),selectItem:new Y.CustomEvent('select'),nextItem:new Y.CustomEvent('next'),previousItem:new Y.CustomEvent('previous')};this.init();}
DM.Carousels.carousel.prototype={inlineElements:'img, span, strong, em, abbr',moveFwd:function(){},moveBwd:function(){},init:function(){var firstItem;var lastItem;this.currentGalleryFrame=0;this.containerParent=this.container.parentNode;this.containerGrandparent=this.containerParent.parentNode;if(this.container){this.scroller=$$(this.classes.scroller,'div',this.container)[0];this.itemList=$$(this.classes.itemList,'ul',this.scroller)[0];this.items=Dom.getChildren(this.itemList);this.pagingControls=$$(this.classes.pagingControls,'div',this.container)[0];if(this.items.length>0){this.currentItem=Dom.getNextSibling(Dom.getFirstChild(this.itemList));this.addEventHandlers();}}},addEventHandlers:function(){Event.addListener(this.container,'mouseover',this.mouseoverContainer,this,true);Event.addListener(this.container,'mouseout',this.mouseoutContainer,this,true);Event.addListener(this.itemList,'mouseover',this.mouseoverItemList,this,true);Event.addListener(this.itemList,'mouseout',this.mouseoutItemList,this,true);Event.addListener(document.body,'scroll',this.scrollListener,this,true);if(this.pagingControls){this.events.nextItem.subscribe(this.scrollTo,this,true);this.events.previousItem.subscribe(this.scrollTo,this,true);Event.addListener(this.pagingControls,'click',this.clickPagingControls,this,true);};},mouseoverContainer:function(event){if(AND.mouseEnterOrLeave(event,this)){if(this.scrolling){this.wasScrolling=true;};};},mouseoutContainer:function(event){if(AND.mouseEnterOrLeave(event,this)){if(this.wasScrolling){this.wasScrolling=false;};};},mouseoverItemList:function(event){this.target=Event.getTarget(event);var nodeName=this.target.nodeName.toLowerCase();if(this.inlineElements.indexOf(nodeName)>-1){this.target=Dom.getAncestorByTagName(this.target,'a')||this.target;};if(this.options.fireSelect){if(this.target.nodeName.toLowerCase()==='a'){if(AND.mouseEnterOrLeave(event,this.target)){this.events.selectItem.fire(this.target);};};}
Event.preventDefault(event);},mouseoutItemList:function(event){this.target=Event.getTarget(event);var nodeName=this.target.nodeName.toLowerCase();if(this.inlineElements.indexOf(nodeName)>-1){this.target=Dom.getAncestorByTagName(this.target,'a')||this.target;};if(this.options.fireSelect){if(this.target.nodeName.toLowerCase()==='a'){if(AND.mouseEnterOrLeave(event,this.target)){this.events.deselectItem.fire(this.target);};};}
Event.preventDefault(event);},clickPagingControls:function(event){this.target=Event.getTarget(event);var nodeName=this.target.nodeName.toLowerCase();if(this.inlineElements.indexOf(nodeName)>-1){this.target=Dom.getAncestorByTagName(this.target,'a')||this.target;};if(this.target.nodeName.toLowerCase()==='a'){if(Dom.hasClass(this.target,'next')){this.events.nextItem.fire();}
else if(Dom.hasClass(this.target,'previous')){this.events.previousItem.fire();};};Event.preventDefault(event);},scrollTo:function(type){if(this.scrolling){if(this.scrolling.isAnimated()){this.scrolling.stop();};};this.scrollerOffset=Dom.getXY(this.scroller);this.itemListOffset=Dom.getXY(this.itemList);if(type==='next'){this.moveFwd();this.currentItem=Dom.getNextSibling(this.currentItem);this.organiseItems=this.organiseItemsFwd;}else if(type==='previous'){this.moveBwd();this.currentItem=Dom.getPreviousSibling(this.currentItem);this.organiseItems=this.organiseItemsBwd;};this.itemOffset=Dom.getXY(this.currentItem);if(this.options.orientation==='horizontal'){this.scrollDistance=this.itemOffset[0]-this.scrollerOffset[0];this.attributes={points:{by:[-this.scrollDistance,0]}};}else if(this.options.orientation==='vertical'){this.scrollDistance=this.itemOffset[1]-this.scrollerOffset[1];this.attributes={points:{by:[0,-this.scrollDistance]}};};this.scrolling=new Y.Motion(this.itemList,this.attributes,this.options.scrollDuration,this.options.scrollMethod);this.scrolling.onComplete.subscribe(this.organiseItems,this,true);this.scrolling.animate();},organiseItemsFwd:function(){this.itemList.removeChild(Dom.getFirstChild(this.itemList));Dom.insertAfter(Dom.getNextSibling(Dom.getFirstChild(this.itemList)).cloneNode(true),Dom.getLastChild(this.itemList));Dom.setXY(this.itemList,this.itemListOffset);},organiseItemsBwd:function(){this.itemList.removeChild(Dom.getLastChild(this.itemList));Dom.insertBefore(Dom.getPreviousSibling(Dom.getLastChild(this.itemList)).cloneNode(true),Dom.getFirstChild(this.itemList));Dom.setXY(this.itemList,this.itemListOffset);}}
DM.Carousels.rolloverCarousel=function(container,options){this.constructor.superclass.constructor.call(this,container,options);this.events.selectItem.subscribe(this.reveal,this,true);this.events.deselectItem.subscribe(this.reveal,this,true);}
Y.Lang.extend(DM.Carousels.rolloverCarousel,DM.Carousels.carousel,{reveal:function(type,args){var revealing;var attributes;var span;span=args[0].getElementsByTagName('span')[0];if(type==='select'){attributes={top:{to:[0]}};}
else if(type==='deselect'){attributes={top:{to:[110]}};};revealing=new Y.Motion(span,attributes,0.5,Y.Easing.easeOut);revealing.animate();}});DM.Carousels.popupCarousel=function(container,options){this.constructor.superclass.constructor.call(this,container,options);this.classes=AND.extendObject(this.classes,{popupWindow:'popup-window',popupContent:'popup-container'});this.popupWindow=$$(this.classes.popupWindow,'div',this.containerParent)[0];this.popupContent=$$(this.classes.popupContent,'div',this.popupWindow)[0];this.closeButton=$$('x-closebutton','a',this.popupWindow)[0];Event.addListener(this.itemList,'click',this.showItemPanel,this,true);Event.addListener(this.closeButton,'click',this.closeItemPanel,this,true);this.events.nextItem.subscribe(this.swapPopup,'next',this,true);this.events.previousItem.subscribe(this.swapPopup,'previous',this,true);}
Y.Lang.extend(DM.Carousels.popupCarousel,DM.Carousels.carousel,{showItemPanel:function(event){$E.preventDefault(event);this.closeItemPanel();this.listTarget=Event.getTarget(event);this.listTarget=Dom.getAncestorByTagName(this.listTarget,'li')||this.listTarget;this.popupContent.innerHTML='&nbsp;';this.animateItemPanel();},closeItemPanel:function(){this.closeButton.style.visibility='hidden';this.popupWindow.style.visibility='hidden';},swapPopup:function(dirn){if(this.listTarget){if(dirn=="next"){this.listTarget=$D.getNextSibling(this.listTarget);}else{this.listTarget=$D.getPreviousSibling(this.listTarget);}
$D.setStyle(this.popupContent,"opacity",0);this.popupContent.innerHTML=$G(this.listTarget.id+'_container').innerHTML;var img=this.popupContent.getElementsByTagName('img')[0];img.src=img.className.split('|')[0];this.animateOpacity();}},animateItemPanel:function(){$D.setStyle(this.popupContent,"opacity",0);this.popupWindow.style.width='';this.popupWindow.style.height='';this.popupContent.innerHTML=$G(this.listTarget.id+'_container').innerHTML;var img=this.popupContent.getElementsByTagName('img')[0];img.src=img.className.split('|')[0];var finishHeight=this.popupContent.offsetHeight;this.popupContent.style.width='0';this.popupContent.style.height='0';this.closeButton.style.visibility='hidden';this.popupWindow.style.visibility='visible';if(!this.anim){this.anim=new YAHOO.util.Anim(this.popupContent,{width:{from:0,to:202},height:{from:0,to:finishHeight}},0.3,YAHOO.util.Easing.easeOut);this.opaqueAnim=new YAHOO.util.Anim(this.popupContent,{opacity:{from:0,to:1}},0.4);}
this.anim.onComplete.subscribe(this.animateOpacity,this,true);this.anim.animate();},animateOpacity:function(){this.popupContent.style.height='';this.closeButton.style.visibility=this.popupWindow.style.visibility;this.opaqueAnim.animate();}});DM.Carousels.imageSwapCarousel=function(container,options){this.constructor.superclass.constructor.call(this,container,options);this.classes=AND.extendObject(this.classes,{galleryFrame:'gallery-frame',placeholder:'placeholder',caption:'caption',link:'link'});this.options.updateFrequency=15000;this.galleryFrame=$$(this.classes.galleryFrame,'div',this.container)[0];this.placeholder=$$(this.classes.placeholder,'img',this.galleryFrame)[0];this.caption=$$(this.classes.caption,'span',this.galleryFrame)[0];this.link=$$(this.classes.link,'a',this.galleryFrame)[0];this.events.selectItem.subscribe(this.updateGalleryFrame,this,true);this.events.nextItem.subscribe(this.updateGalleryFrame,this,true);this.events.previousItem.subscribe(this.updateGalleryFrame,this,true);this.periodicallyUpdateGalleryFrame();}
Y.Lang.extend(DM.Carousels.imageSwapCarousel,DM.Carousels.carousel,{clearTimer:function(){clearTimeout(this.timer);this.timer=null;},periodicallyUpdateGalleryFrame:function(){if(this.timer!=null){this.clearTimer.call(this);this.currentGalleryFrame=(this.currentGalleryFrame+1)%3;this.updateGalleryFrame("update",[Dom.getChildren(this.itemList)[this.currentGalleryFrame+1].getElementsByTagName('a')[0]]);}
var that=this;this.timer=setTimeout(proxyFunc,this.options.updateFrequency);function proxyFunc(){that.periodicallyUpdateGalleryFrame();}},clickGalleryFrame:function(event){var target=Event.getTarget(event);var nodeName=target.nodeName.toLowerCase();if(this.inlineElements.indexOf(nodeName)>-1){target=Dom.getAncestorByTagName(target,'a')||target;};if(target.nodeName.toLowerCase()==='a'){if(Dom.hasClass(target,'x-closebutton')){this.events.deselectItem.fire();};};Event.preventDefault(event);},updateGalleryFrame:function(type,args){var anchor;var image;if(type=="next")this.currentItem=Dom.getChildren(this.itemList)[2];if(args[0]){anchor=args[0];}
else{anchor=this.currentItem.getElementsByTagName('a')[0];};image=anchor.getElementsByTagName('img')[0];this.placeholder.src=anchor.getAttribute('rel').split('|')[0];this.placeholder.alt=image.getAttribute('alt');this.placeholder.title=image.getAttribute('title');this.caption.innerHTML=image.getAttribute('alt');this.link.href=anchor.getAttribute('href');}});DM.Carousels.lightBoxCarousel=function(container,options){this.constructor.superclass.constructor.call(this,container,options);this.index=0;this.classes=AND.extendObject(this.classes,{galleryFrame:'gallery-frame',placeholder:'placeholder',caption:'caption',link:'link'});this.galleryFrame=$$(this.classes.galleryFrame,'div',this.container)[0];this.placeholder=$$(this.classes.placeholder,'img',this.galleryFrame)[0];this.caption=$$(this.classes.caption,'span',this.galleryFrame)[0];this.link=$$(this.classes.link,'a',this.galleryFrame)[0];if(this.galleryFrame&&this.placeholder&&this.caption){this.events.selectItem.subscribe(this.updateGalleryFrame,this,true);};this.events.nextItem.subscribe(this.updateGalleryFrame,this,true);this.events.previousItem.subscribe(this.updateGalleryFrame,this,true);if(!this.options.syncCarousel){this.syncCarousel=new DM.Carousels.lightBoxCarousel(this.container.className.split('|')[0],{fireSelect:true,syncCarousel:this});new imageLightBoxGallery(this.container.parentNode.parentNode.parentNode);}else{this.syncCarousel=this.options.syncCarousel;}
this.events.nextItem.subscribe(this.syncCarousel.scrollTo,this.syncCarousel,true);this.events.previousItem.subscribe(this.syncCarousel.scrollTo,this.syncCarousel,true);}
Y.Lang.extend(DM.Carousels.lightBoxCarousel,DM.Carousels.carousel,{init:function(){var firstItem;var lastItem;this.currentGalleryFrame=0;this.containerParent=this.container.parentNode;this.containerGrandparent=this.containerParent.parentNode;if(this.container){this.scroller=$$(this.classes.scroller,'div',this.container)[0];this.itemList=$$(this.classes.itemList,'ul',this.scroller)[0];this.items=Dom.getChildren(this.itemList);this.pagingControls=$$(this.classes.pagingControls,'div',this.container)[0];if(this.items.length>0){this.currentItem=Dom.getFirstChild(this.itemList);firstItem=Dom.getFirstChild(this.itemList).cloneNode(true);lastItem=Dom.getLastChild(this.itemList).cloneNode(true);Dom.insertAfter(firstItem,Dom.getLastChild(this.itemList));Dom.insertBefore(lastItem,Dom.getFirstChild(this.itemList));Dom.setStyle($$('previous','a',this.pagingControls),'display','none');if(this.items.length<4){Dom.setStyle($$('next','a',this.pagingControls),'display','none');};this.addEventHandlers();}}},moveFwd:function(){this.index++;if((this.index+3)<this.items.length){Dom.setStyle($$('next','a',this.pagingControls),'display','inline');}else{Dom.setStyle($$('next','a',this.pagingControls),'display','none');}
if(this.index>0){Dom.setStyle($$('previous','a',this.pagingControls),'display','inline');}else{Dom.setStyle($$('previous','a',this.pagingControls),'display','none');};},moveBwd:function(){this.index--;if((this.index+2)<this.items.length){Dom.setStyle($$('next','a',this.pagingControls),'display','inline');}else{Dom.setStyle($$('next','a',this.pagingControls),'display','none');};if(this.index>0){Dom.setStyle($$('previous','a',this.pagingControls),'display','inline');}else{Dom.setStyle($$('previous','a',this.pagingControls),'display','none');}},updateGalleryFrame:function(type,args){var anchor,image,buyLink,moreLink,frameBuyLink,frameMoreLink;if(type=="next")this.currentItem=Dom.getChildren(this.itemList)[2];if(args[0]){anchor=args[0];}else{anchor=this.currentItem.getElementsByTagName('a')[0];}
buyLink=$$("js-buy-link","a",anchor.parentNode)[0];moreLink=$$("js-more-link","a",anchor.parentNode)[0];frameBuyLink=$$("js-buy-link","a",this.galleryFrame)[0];frameMoreLink=$$("js-more-link","a",this.galleryFrame)[0];if(buyLink){frameBuyLink.href=buyLink.href;frameBuyLink.innerHTML=buyLink.innerHTML;}else if(frameBuyLink){frameBuyLink.href="#";frameBuyLink.innerHTML="";}
if(moreLink){frameMoreLink.href=moreLink.href;frameMoreLink.innerHTML=moreLink.innerHTML;}else if(frameMoreLink){frameMoreLink.href="#";frameMoreLink.innerHTML="";}
image=anchor.getElementsByTagName('img')[0];this.placeholder.src=anchor.getAttribute('rel').split('|')[0];this.placeholder.alt=image.getAttribute('alt');this.placeholder.title=image.getAttribute('title');this.caption.innerHTML=image.getAttribute('alt');this.link.href=anchor.getAttribute('href');}});DM.Carousels.infoCarousel=function(id,container){this.constructor.superclass.constructor.call(this,id,container);this.classes=AND.extendObject(this.classes,{infoCarousel:'info-carousel',infoImg:'js-info-img',infoContent:'js-info-text',infoBuyButton:'js-buy-link'});this.infoImg=$$(this.classes.infoImg,'img',this.container)[0];this.infoContent=$$(this.classes.infoContent,'div',this.container)[0];this.buyButton=$$(this.classes.infoBuyButton,'a',this.container)[0];Event.addListener(this.itemList,'click',this.showInfo,this,true);this.events.nextItem.subscribe(this.swapInfo,"next",this,true);this.events.previousItem.subscribe(this.swapInfo,"previous",this,true);}
Y.Lang.extend(DM.Carousels.infoCarousel,DM.Carousels.carousel,{showInfo:function(event){$E.preventDefault(event);this.listTarget=Event.getTarget(event);this.listTarget=Dom.getAncestorByTagName(this.listTarget,'li')||this.listTarget;this.updateInfo(this.listTarget);},swapInfo:function(dirn){if(!this.listTarget){this.listTarget=this.itemList.getElementsByTagName('li')[1];}
if(dirn=="next")this.listTarget=$D.getNextSibling(this.listTarget);else this.listTarget=$D.getPreviousSibling(this.listTarget);this.updateInfo(this.listTarget);},updateInfo:function(target){var targInfo=$G(target.id+'_info'),targImg=$G(target.id+'_img'),targLink=$G(target.id+'_link');if(targInfo){this.infoContent.innerHTML=targInfo.innerHTML;this.infoImg.src=targImg.className.split('|')[0];this.infoImg.alt=targImg.alt;if(targLink){this.buyButton.href=targLink.getAttribute('href');this.buyButton.rel=targLink.getAttribute('rel').split('|')[0];this.buyButton.target=targLink.getAttribute('target');this.buyButton.innerHTML=targLink.innerHTML;$D.removeClass(this.buyButton,'hidden');}else{$D.addClass(this.buyButton,'hidden');}}}});DM.Twitters=function(){var tweetTemplate;return{applyTweetTemplate:function(obj){return tweetTemplate.apply(obj);},init:function(objs){tweetTemplate=new AND.Template('<li class="bdrgr2 {bottomClass} box">'+'<span class="arrow-small-r"></span>'+'<span class="tweet">{tweet}</span>'+'<span class="when gr4ox">{when}</span>'+'</li>');for(var i=0,len=objs.length;i<len;i++){new DM.Twitter(objs[i].id);}}}}();DM.Twitter=function(id){this.el=$(id);this._init();}
DM.Twitter.prototype={relative_time:function(time_value){var values=time_value.split(" ");time_value=values[1]+" "+values[2]+", "+values[5]+" "+values[3];var parsed_date=Date.parse(time_value);var relative_to=(arguments.length>1)?arguments[1]:new Date();var delta=parseInt((relative_to.getTime()-parsed_date)/1000);delta=delta+(relative_to.getTimezoneOffset()*60);if(delta<60){return"less than a minute ago";}else if(delta<120){return"about a minute ago";}else if(delta<(60*60)){return(parseInt(delta/60)).toString()+" minutes ago";}else if(delta<(120*60)){return"about an hour ago";}else if(delta<(24*60*60)){return"about "+(parseInt(delta/3600)).toString()+" hours ago";}else if(delta<(48*60*60)){return"1 day ago";}else{return(parseInt(delta/86400)).toString()+" days ago";}},_init:function(){AND.JSONscriptRequestManager.getScript({scope:this,useCache:false,scriptUrl:"http://twitter.com/statuses/user_timeline/"+this.el.className.match(/twitter\-([a-zA-Z0-9]+)/)[1]+".json?count=5",callback:function(data,request){var tmp="";for(var i=0,len=data.length;i<len;i++){if(i==0){$$("twitter-footer","div",this.el)[0].getElementsByTagName("span")[0].innerHTML="Follow "+data[i].user.name.split(" ")[0]+" on Twitter";this.el.getElementsByTagName("h3")[0].innerHTML=data[i].user.name+" on Twitter";if(data[i].user.profile_image_url.indexOf("default")==-1){this.el.getElementsByTagName("img")[0].src=data[i].user.profile_image_url.replace("normal","bigger");}}
var tweetText=data[i].text.replace(/((https?|s?ftp|ssh)\:\/\/[^"\s\<\>]*[^.,;'">\:\s\<\>\)\]\!])/g,function(url){return"<a href=\""+url+"\">"+url+"</a>";}).replace(/\B@([_a-z0-9]+)/ig,function(reply){return reply.charAt(0)+"<a href=\"http://twitter.com/"+reply.substring(1)+"\">"+reply.substring(1)+"</a>";});tmp+=DM.Twitters.applyTweetTemplate({tweet:tweetText,when:this.relative_time(data[i].created_at),bottomClass:(i==len-1)?"":"no-bot"});}
this.el.getElementsByTagName("ul")[0].innerHTML=tmp;}});}}
DM.Article=function(){return{init:function(){var referrer=AND.getUrlParameter("referrer");if(referrer!=""){var articleLinks=$$("article-icon-links","ul","js-article-text")[0];if(typeof articleLinks!="undefined"){var referrers=[{id:"yahoo",url:"http://www.yahoo.com",text:"Return to",img:G_IMG_SRV+"/i/furniture/misc/yahoo_59x12.gif"}];var referrerTemplate=new AND.Template('<li class="referrer">'+'<a href="{url}" rel="nofollow">'+'<span>{text}</span>'+'<img src="{img}" alt="{id}" />'+'</a>'+'</li>');for(var i=0,len=referrers.length;i<len;i++){if(referrer==referrers[i].id){var html=referrerTemplate.apply(referrers[i]);articleLinks.innerHTML=articleLinks.innerHTML+html;}}}}}}}();